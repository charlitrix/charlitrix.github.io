"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[5581],{5581:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ie});var s=l(9835),t=l(6970);const o={class:"q-mb-lg"},i=(0,s._)("div",{class:"text-h5"},"Fiscal Year",-1),n={class:"q-px-md row q-col-gutter-x-xl q-mb-lg"},d={class:"row items-center justify-end"},u={class:"row items-center justify-end"},m={class:"column justify-center"},r=(0,s._)("div",{class:"text-subtitle1 q-mb-lg"}," These settings determine how the transactions of the differenct accounts will be handled ",-1),c={class:"q-mb-md"},h=(0,s._)("div",{class:"text-h5"},"Items Classfication and Categorization",-1),g={class:"q-px-md"},C=(0,s._)("div",{class:"text-body2"}," Items with in the financial transactions have to be uniquely identified ",-1),p={class:"q-mb-lg"},v=(0,s._)("div",{class:"text-h5"},"Financial Records Data Entry",-1),b={class:"q-px-md column"},f={key:0,class:"q-py-lg q-px-lg q-mx-xl q-mb-md q-mt-sm bg-grey-2"},y=(0,s._)("div",{class:"text-weight-medium"},"Data Entry Settings",-1),_={class:"q-mx-sm"},D={class:"row"},k={class:"col-5"},w={class:"row"},Y={key:1,class:"q-py-lg q-px-lg q-mx-xl q-mb-md q-mt-sm bg-grey-2"},q=(0,s._)("div",{class:"text-weight-medium"},"Data Entry Settings",-1),x={class:"q-mx-sm"},V={class:"row"},B={class:"col-5"},P={class:"row"},A={key:2,class:"q-py-lg q-px-lg q-mx-xl q-mb-md q-mt-sm bg-grey-2"},W=(0,s._)("div",{class:"text-weight-medium"},"Data Entry Settings",-1),Z={class:"q-mx-sm"},M={class:"row"},S={class:"col-5"},E={class:"row"};function F(e,a,l,F,L,U){const I=(0,s.up)("q-btn"),H=(0,s.up)("q-date"),T=(0,s.up)("q-popup-proxy"),Q=(0,s.up)("q-icon"),N=(0,s.up)("q-input"),O=(0,s.up)("q-separator"),j=(0,s.up)("q-checkbox"),$=(0,s.up)("q-item-label"),z=(0,s.up)("q-item-section"),K=(0,s.up)("q-item"),G=(0,s.up)("q-list"),R=(0,s.up)("q-page"),J=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(R,{class:"q-pa-xl"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[i,(0,s._)("div",n,[(0,s.Wm)(N,{readonly:"",modelValue:e.formattedFromDate,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formattedFromDate=a),label:"From date"},{append:(0,s.w5)((()=>[(0,s.Wm)(Q,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref:"fromDateProxy"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{modelValue:e.fromDate,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.fromDate=a),e.fromDateChanged],mask:"YYYY-MM-DD"},{default:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s.wy)((0,s.Wm)(I,{label:"Close",color:"primary",flat:""},null,512),[[J]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(N,{readonly:"",modelValue:e.formattedToDate,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formattedToDate=a),label:"To date"},{append:(0,s.w5)((()=>[(0,s.Wm)(Q,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{cover:"","transition-show":"scale","transition-hide":"scale",ref:"toDateProxy"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{modelValue:e.toDate,"onUpdate:modelValue":[a[2]||(a[2]=a=>e.toDate=a),e.toDateChanged],mask:"YYYY-MM-DD"},{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s.wy)((0,s.Wm)(I,{label:"Close",color:"primary",flat:""},null,512),[[J]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,s._)("div",m,[(0,s.Wm)(I,{color:"primary",label:"Save",disable:e.disableSave,loading:e.savingFiscalYear,onClick:e.saveFiscalYear},null,8,["disable","loading","onClick"])])]),(0,s.Wm)(O)]),r,(0,s._)("div",c,[h,(0,s._)("div",g,[C,(0,s.Wm)(j,{label:e.useBudgetPlan.label,modelValue:e.useBudgetPlan.value,"onUpdate:modelValue":a[4]||(a[4]=a=>e.useBudgetPlan.value=a),"indeterminate-value":e.useBudgetPlan.value,disable:e.useBudgetPlan.disable},null,8,["label","modelValue","indeterminate-value","disable"])])]),(0,s._)("div",p,[v,(0,s._)("div",b,[(0,s.Wm)(j,{label:e.useLedgers.label,modelValue:e.useLedgers.value,"onUpdate:modelValue":a[5]||(a[5]=a=>e.useLedgers.value=a),"indeterminate-value":e.useLedgers.value,disable:e.useLedgers.disable},null,8,["label","modelValue","indeterminate-value","disable"]),e.useLedgers.value?((0,s.wg)(),(0,s.iD)("div",f,[y,(0,s._)("div",_,[(0,s._)("div",D,[(0,s._)("div",k,[(0,s.Wm)(G,{dense:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.ledgerColumns,((a,l)=>((0,s.wg)(),(0,s.j4)(K,{class:"text-grey-10",key:l},{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(a),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(z,{side:""},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s.Wm)(I,{flat:"",icon:"edit",color:"blue",onClick:a=>e.addLedgerColumn(l)},null,8,["onClick"]),e.editableData(a)?((0,s.wg)(),(0,s.j4)(I,{key:0,flat:"",icon:"delete",color:"red",onClick:a=>e.ledgerColumns.splice(l,1)},null,8,["onClick"])):(0,s.kq)("",!0)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])]),(0,s.Wm)(I,{"no-caps":"",unelevated:"",label:"Add Columns",onClick:a[6]||(a[6]=a=>e.addLedgerColumn(null)),color:"primary",class:"q-mt-md"})])])):(0,s.kq)("",!0),(0,s.Wm)(j,{label:e.useVoteBook.label,modelValue:e.useVoteBook.value,"onUpdate:modelValue":a[7]||(a[7]=a=>e.useVoteBook.value=a),"indeterminate-value":e.useVoteBook.value,disable:e.useVoteBook.disable},null,8,["label","modelValue","indeterminate-value","disable"]),e.useVoteBook.value?((0,s.wg)(),(0,s.iD)("div",Y,[q,(0,s._)("div",x,[(0,s._)("div",V,[(0,s._)("div",B,[(0,s.Wm)(G,{dense:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.voteBookColumns,((a,l)=>((0,s.wg)(),(0,s.j4)(K,{class:"text-grey-10",key:l},{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(a),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(z,{side:""},{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s.Wm)(I,{flat:"",icon:"edit",color:"blue",onClick:a=>e.addVoteBookColumn(l)},null,8,["onClick"]),e.editableData(a)?((0,s.wg)(),(0,s.j4)(I,{key:0,flat:"",icon:"delete",color:"red",onClick:a=>e.voteBookColumns.splice(l,1)},null,8,["onClick"])):(0,s.kq)("",!0)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])]),(0,s.Wm)(I,{"no-caps":"",unelevated:"",label:"Add Columns",onClick:a[8]||(a[8]=a=>e.addVoteBookColumn(null)),color:"primary",class:"q-mt-md"})])])):(0,s.kq)("",!0),(0,s.Wm)(j,{label:e.useCashAnalysis.label,modelValue:e.useCashAnalysis.value,"onUpdate:modelValue":a[9]||(a[9]=a=>e.useCashAnalysis.value=a),"indeterminate-value":e.useCashAnalysis.value,disable:e.useCashAnalysis.disable},null,8,["label","modelValue","indeterminate-value","disable"]),e.useCashAnalysis.value?((0,s.wg)(),(0,s.iD)("div",A,[W,(0,s._)("div",Z,[(0,s._)("div",M,[(0,s._)("div",S,[(0,s.Wm)(G,{dense:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cashAnalysisColumns,((a,l)=>((0,s.wg)(),(0,s.j4)(K,{class:"text-grey-10",key:l},{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,t.zw)(a),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(z,{side:""},{default:(0,s.w5)((()=>[(0,s._)("div",E,[(0,s.Wm)(I,{flat:"",icon:"edit",color:"blue",onClick:a=>e.addCashAnalysisColumn(l)},null,8,["onClick"]),e.editableData(a)?((0,s.wg)(),(0,s.j4)(I,{key:0,flat:"",icon:"delete",color:"red",onClick:a=>e.cashAnalysisColumns.splice(l,1)},null,8,["onClick"])):(0,s.kq)("",!0)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])]),(0,s.Wm)(I,{"no-caps":"",unelevated:"",label:"Add Columns",onClick:a[10]||(a[10]=a=>e.addCashAnalysisColumn(null)),color:"primary",class:"q-mt-md"})])])):(0,s.kq)("",!0)])]),(0,s.Wm)(I,{label:"Save",class:"full-width",color:"primary",onClick:e.confirmUpdate,loading:e.savingContent},null,8,["onClick","loading"])])),_:1})}l(9665);var L=l(499),U=l(9302),I=l(4170),H=l(4019);const T=(0,s.aZ)({name:"GeneralSettings",data(){const e=new Date;return{updateSettings:!1,disableSave:(0,L.iH)(!0),fromDate:(0,L.iH)(I.ZP.formatDate(e,"YYYY-MM-DD")),toDate:(0,L.iH)(I.ZP.formatDate(I.ZP.addToDate(e,{months:12,days:-1}),"YYYY-MM-DD")),savingContent:(0,L.iH)(!1),savingFiscalYear:(0,L.iH)(!1),useBudgetPlan:(0,L.iH)({label:"Use Budget plan",value:!1}),useLedgers:(0,L.iH)({label:"Use Ledgers for records entry. ",value:!0,disable:!0}),useVoteBook:(0,L.iH)({label:"Use Vote Book for expenses",value:!1}),useCashAnalysis:(0,L.iH)({label:"Use Cash analysis for receipts and payments",value:!1}),ledgerColumns:(0,L.iH)([]),voteBookColumns:(0,L.iH)([]),cashAnalysisColumns:(0,L.iH)([]),nonEditableColumns:(0,L.iH)([])}},computed:{formattedFromDate(){return I.ZP.formatDate(I.ZP.extractDate(this.fromDate,"YYYY-MM-DD"),"DD/MM/YYYY")},formattedToDate(){return I.ZP.formatDate(I.ZP.extractDate(this.toDate,"YYYY-MM-DD"),"DD/MM/YYYY")}},methods:{editableData(e){return-1==this.nonEditableColumns.indexOf(e)},addLedgerColumn(e){const a=null!=e?this.ledgerColumns[e]:"";this.$q.dialog({title:"Add Column",prompt:{model:a,placeholder:"Enter column name"},cancel:!0,persistent:!0}).onOk((a=>{a&&(null!=e?this.ledgerColumns[e]=a:this.ledgerColumns.push(a))})).onCancel((()=>{}))},addVoteBookColumn(e){const a=null!=e?this.voteBookColumns[e]:"";this.$q.dialog({title:"Add Column",prompt:{model:a,placeholder:"Enter column name"},cancel:!0,persistent:!0}).onOk((a=>{a&&(null!=e?this.voteBookColumns[e]=a:this.voteBookColumns.push(a))})).onCancel((()=>{}))},addCashAnalysisColumn(e){const a=null!=e?this.cashAnalysisColumns[e]:"";this.$q.dialog({title:"Add Column",prompt:{model:a,placeholder:"Enter column name"},cancel:!0,persistent:!0}).onOk((a=>{a&&(null!=e?this.cashAnalysisColumns[e]=a:this.cashAnalysisColumns.push(a))})).onCancel((()=>{}))},fromDateChanged(e){const a=I.ZP.extractDate(e,"YYYY-MM-DD");this.toDate=I.ZP.formatDate(I.ZP.addToDate(a,{months:12,days:-1}),"YYYY-MM-DD"),this.$refs.fromDateProxy.hide()},toDateChanged(e){const a=I.ZP.extractDate(e,"YYYY-MM-DD");this.fromDate=I.ZP.formatDate(I.ZP.subtractFromDate(a,{months:12,days:-1}),"YYYY-MM-DD"),this.$refs.toDateProxy.hide()},saveFiscalYear(){this.$q.dialog({title:"Confirm ?",message:"Please confirm the dates before pressing okay. Once fiscal year is set it cannot be changed.",cancel:!0,persistent:!0}).onOk((()=>{this.savingFiscalYear=!0,(0,H.createFiscalYear)({start:this.fromDate,end:this.toDate}).then((e=>{201==e.status&&(this.disableSave=!0,this.displayNotification("Fiscal year has been set","blue"))})).catch((e=>{this.displayNotification("Server error, Please contact system administrator.","red")})).finally((()=>{this.savingFiscalYear=!1}))})).onCancel((()=>{}))},confirmUpdate(){this.$q.dialog({title:"Confirm ?",message:"Please confirm",cancel:!0,persistent:!0}).onOk((()=>{var e=[];e.push({item:"ITEMS_SPECIFICATION",additional_data:{use_budget_plan:{...this.useBudgetPlan}}}),delete this.useLedgers.disable,delete this.useLedgers.label,delete this.useVoteBook.disable,delete this.useVoteBook.label,delete this.useCashAnalysis.disable,delete this.useCashAnalysis.label,e.push({item:"FINANCIAL_DOCUMENTS",additional_data:{use_ledgers:{...this.useLedgers,additional_columns:this.ledgerColumns},use_vote_book:{...this.useVoteBook,additional_columns:this.voteBookColumns},use_cash_analysis:{...this.useCashAnalysis,additional_columns:this.cashAnalysisColumns}}}),this.savingContent=!0,(0,H.createFeatureSettings)({data:e}).then((e=>{this.displayNotification("Settings have been set.","blue"),this.setPageData(response)})).catch((e=>{this.displayNotification("Server error, Please contact system administrator.","red")})).finally((()=>{this.savingContent=!1}))})).onCancel((()=>{}))},setPageData(e){e.data.forEach((e=>{const a=Object.keys(e["additional_data"]);"ITEMS_SPECIFICATION"==e["item"]&&a.forEach((a=>{if("use_budget_plan"==a){const l=e["additional_data"][a];this.useBudgetPlan={...this.useBudgetPlan,...l},this.useBudgetPlan.disable=l.value}})),"FINANCIAL_DOCUMENTS"==e["item"]&&a.forEach((a=>{if("use_vote_book"==a){const l=e["additional_data"][a];this.useVoteBook={...this.useVoteBook,...l},this.useVoteBook.disable=l.value,this.voteBookColumns=l.additional_columns?l.additional_columns:[],this.voteBookColumns&&this.voteBookColumns.length>0&&(this.nonEditableColumns=this.nonEditableColumns.concat(this.voteBookColumns))}if("use_ledgers"==a){const l=e["additional_data"][a];this.useLedgers={...this.useLedgers,...l},this.useLedgers.disable=l.value,this.ledgerColumns=l.additional_columns?l.additional_columns:[],this.ledgerColumns&&this.ledgerColumns.length>0&&(this.nonEditableColumns=this.nonEditableColumns.concat(this.ledgerColumns))}if("use_cash_analysis"==a){const l=e["additional_data"][a];this.useCashAnalysis={...this.useCashAnalysis,...l},this.useCashAnalysis.disable=l.value,this.cashAnalysisColumns=l.additional_columns?l.additional_columns:[],this.cashAnalysisColumns&&this.cashAnalysisColumns.length>0&&(this.nonEditableColumns=this.nonEditableColumns.concat(this.cashAnalysisColumns))}}))}))}},mounted(){(0,H.getFiscalYear)("?current=True").then((e=>{this.fromDate=e.data.start,this.toDate=e.data.end})).catch((e=>{404==e.response.status&&(this.disableSave=!1)})).finally((()=>{(0,H.getFeatureSettings)().then((e=>{e.data?(this.setPageData(e),this.updateSettings=!0):this.updateSettings=!1}))}))},setup(){return(0,U.Z)(),{}}});var Q=l(1639),N=l(9885),O=l(6611),j=l(2857),$=l(2765),z=l(4351),K=l(8879),G=l(926),R=l(1221),J=l(3246),X=l(490),ee=l(1233),ae=l(3115),le=l(2146),se=l(9984),te=l.n(se);const oe=(0,Q.Z)(T,[["render",F]]),ie=oe;te()(T,"components",{QPage:N.Z,QInput:O.Z,QIcon:j.Z,QPopupProxy:$.Z,QDate:z.Z,QBtn:K.Z,QSeparator:G.Z,QCheckbox:R.Z,QList:J.Z,QItem:X.Z,QItemSection:ee.Z,QItemLabel:ae.Z}),te()(T,"directives",{ClosePopup:le.Z})}}]);