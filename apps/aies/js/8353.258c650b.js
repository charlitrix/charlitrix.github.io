"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[8353],{8353:(e,s,t)=>{t.r(s),t.d(s,{default:()=>se});var l=t(9835);const u={class:"flex flex-center bg-grey-2 q-py-xl",style:{minHeight:"100vh"}},o={class:"row justify-center",style:{width:"400px",maxWidth:"100%"}},n={class:"col-12"},a=(0,l._)("div",{class:"text-h6"}," Enter your user name below to request for a password reset. ",-1),i={class:"flex flex-center"},r={class:"row justify-center",style:{width:"400px",maxWidth:"100%"}},d={class:"col-12"},m=(0,l._)("div",{class:"text-h6"}," Select the security questions and provide the right answers ",-1),c={class:"column q-col-gutter-y-xl"},p=(0,l._)("div",{class:"text-weight-bold"},"Question 1",-1),w={class:"column q-gutter-y-md"},q=(0,l._)("div",{class:"text-subtitle1 text-weight-bold"}," Answer: ",-1),v=(0,l._)("div",{class:"text-weight-bold"},"Question 2",-1),y={class:"column q-gutter-y-md"},f=(0,l._)("div",{class:"text-subtitle1 text-weight-bold"}," Answer: ",-1),b=(0,l._)("div",{class:"text-weight-bold"},"Question 3",-1),g={class:"column q-gutter-y-md"},_=(0,l._)("div",{class:"text-subtitle1 text-weight-bold"}," Answer: ",-1),h={class:"flex flex-center"},Q={class:"row justify-center",style:{width:"400px",maxWidth:"100%"}},W={class:"col-12"},x={key:0},S=(0,l._)("div",{class:"text-h6"},"Set new password.",-1),V={key:1},P={class:"flex flex-center"};function R(e,s,t,R,U,H){const Z=(0,l.up)("title-bar-component"),N=(0,l.up)("q-header"),k=(0,l.up)("q-input"),I=(0,l.up)("q-btn"),T=(0,l.up)("q-card-section"),z=(0,l.up)("q-form"),C=(0,l.up)("q-card"),F=(0,l.up)("q-tab-panel"),L=(0,l.up)("q-select"),B=(0,l.up)("q-spinner-ios"),D=(0,l.up)("q-inner-loading"),j=(0,l.up)("q-tab-panels"),A=(0,l.up)("q-page"),G=(0,l.up)("q-page-container"),$=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)($,{view:"hHh Lpr lFf"},{default:(0,l.w5)((()=>[(0,l.Wm)(N,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z)])),_:1}),(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Wm)(A,null,{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(j,{modelValue:e.tabs,"onUpdate:modelValue":s[10]||(s[10]=s=>e.tabs=s)},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{name:1},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",n,[(0,l.Wm)(C,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{ref:"userNameForm",onSubmit:e.submitUserNameData},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"column q-col-gutter-y-md"},{default:(0,l.w5)((()=>[a,(0,l.Wm)(k,{outlined:"",modelValue:e.userName,"onUpdate:modelValue":s[0]||(s[0]=s=>e.userName=s),label:"User name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,l._)("div",null,[(0,l.Wm)(I,{dense:"",rounded:"","no-caps":"",color:"primary",class:"full-width",label:"Submit",loading:e.submitting,type:"submit"},null,8,["loading"])])])),_:1})])),_:1},8,["onSubmit"]),(0,l.Wm)(T,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(I,{flat:"","no-caps":"",color:"primary",label:"Go Back",to:{name:"Login"}})])])),_:1})])),_:1})])])])),_:1}),(0,l.Wm)(F,{name:2},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("div",d,[(0,l.Wm)(C,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{ref:"userQuestionsForm",onSubmit:e.submitUserQuestions},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"column q-col-gutter-y-md"},{default:(0,l.w5)((()=>[m,(0,l._)("div",c,[(0,l._)("div",null,[p,(0,l._)("div",w,[(0,l.Wm)(L,{modelValue:e.userSecurityQuestions.question1.question,"onUpdate:modelValue":s[1]||(s[1]=s=>e.userSecurityQuestions.question1.question=s),options:e.userSecurityQuestions.question1.options,"option-label":e=>e+" ?","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.userSecurityQuestions.question1.options)},null,8,["modelValue","options","option-label","rules"]),(0,l.Wm)(k,{dense:"",outlined:"",modelValue:e.userSecurityQuestions.question1.answer,"onUpdate:modelValue":s[2]||(s[2]=s=>e.userSecurityQuestions.question1.answer=s),"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},{before:(0,l.w5)((()=>[q])),_:1},8,["modelValue","rules"])])]),(0,l._)("div",null,[v,(0,l._)("div",y,[(0,l.Wm)(L,{modelValue:e.userSecurityQuestions.question2.question,"onUpdate:modelValue":s[3]||(s[3]=s=>e.userSecurityQuestions.question2.question=s),options:e.userSecurityQuestions.question2.options,"option-label":e=>e+" ?","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.userSecurityQuestions.question2.options)},null,8,["modelValue","options","option-label","rules"]),(0,l.Wm)(k,{dense:"",outlined:"",modelValue:e.userSecurityQuestions.question2.answer,"onUpdate:modelValue":s[4]||(s[4]=s=>e.userSecurityQuestions.question2.answer=s),"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},{before:(0,l.w5)((()=>[f])),_:1},8,["modelValue","rules"])])]),(0,l._)("div",null,[b,(0,l._)("div",g,[(0,l.Wm)(L,{modelValue:e.userSecurityQuestions.question3.question,"onUpdate:modelValue":s[5]||(s[5]=s=>e.userSecurityQuestions.question3.question=s),options:e.userSecurityQuestions.question3.options,"option-label":e=>e+" ?","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.userSecurityQuestions.question3.options)},null,8,["modelValue","options","option-label","rules"]),(0,l.Wm)(k,{dense:"",outlined:"",modelValue:e.userSecurityQuestions.question3.answer,"onUpdate:modelValue":s[6]||(s[6]=s=>e.userSecurityQuestions.question3.answer=s),"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},{before:(0,l.w5)((()=>[_])),_:1},8,["modelValue","rules"])])])]),(0,l._)("div",null,[(0,l.Wm)(I,{dense:"",rounded:"","no-caps":"",color:"primary",class:"full-width",label:"Submit",loading:e.submitting,type:"submit"},null,8,["loading"])])])),_:1})])),_:1},8,["onSubmit"]),(0,l.Wm)(T,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l.Wm)(I,{flat:"","no-caps":"",color:"primary",label:"Go Back",to:{name:"Login"}})])])),_:1})])),_:1})])])])),_:1}),(0,l.Wm)(F,{name:3},{default:(0,l.w5)((()=>[(0,l._)("div",Q,[(0,l._)("div",W,[(0,l.Wm)(C,{flat:""},{default:(0,l.w5)((()=>[e.continuePasswordReset?((0,l.wg)(),(0,l.iD)("div",x,[(0,l.Wm)(z,{ref:"newPasswordForm",onSubmit:e.submitNewPassword},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{class:"column q-col-gutter-y-md"},{default:(0,l.w5)((()=>[S,(0,l.Wm)(k,{outlined:"",modelValue:e.newPassword,"onUpdate:modelValue":s[8]||(s[8]=s=>e.newPassword=s),label:"New Password",type:e.passwordToggle?"password":"text","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},{append:(0,l.w5)((()=>[(0,l.Wm)(I,{flat:"",round:"",icon:e.passwordToggle?"visibility_off":"visibility",onClick:s[7]||(s[7]=s=>e.passwordToggle=!e.passwordToggle)},null,8,["icon"])])),_:1},8,["modelValue","type","rules"]),(0,l.Wm)(k,{outlined:"",modelValue:e.confirmPassword,"onUpdate:modelValue":s[9]||(s[9]=s=>e.confirmPassword=s),label:"Confirm Password",type:"password",rules:[...e.textInputRequiredRules(),...e.equalToRequiredRules(e.newPassword,"Passwords do not match.")]},null,8,["modelValue","rules"]),(0,l._)("div",null,[(0,l.Wm)(I,{dense:"",rounded:"","no-caps":"",color:"primary",class:"full-width",label:"Submit",loading:e.submitting,type:"submit"},null,8,["loading"])])])),_:1})])),_:1},8,["onSubmit"])])):((0,l.wg)(),(0,l.iD)("div",V," Please restart process again. Either you took long to reset your password or there is a problem with the request. ")),(0,l.Wm)(T,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",P,[(0,l.Wm)(I,{flat:"","no-caps":"",color:"primary",label:"Go Back",to:{name:"Login"}})])])),_:1})])),_:1})]),(0,l.Wm)(D,{dark:"",color:"primary",showing:e.verifying,label:"Please wait verifying ..."},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{size:"50px",color:"white"})])),_:1},8,["showing"])])])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1})])),_:1})}t(9665);var U=t(499),H=t(4019),Z=t(8221),N=t(9302),k=t(6037),I=t(8339);const T=(0,l.aZ)({name:"UserPasswordReset",components:{TitleBarComponent:k.Z},setup(){(0,N.Z)();const e=(0,I.tv)(),s={question1:{question:null,options:[],answer:null},question2:{question:null,options:[],answer:null},question3:{question:null,options:[],answer:null}},t=(0,U.iH)(null),u=(0,U.iH)(!1),o=(0,U.iH)(1),n=(0,U.iH)(null),a=(0,U.iH)({...s}),i=((0,U.iH)(null),(0,U.iH)(null)),r=(0,U.iH)([]),d=(0,U.iH)(null),m=(0,U.iH)(null),c=(0,U.iH)(null),p=(0,U.iH)(!1),w=(0,U.iH)(null),q=(0,U.iH)(!1),v=(0,U.iH)(!0);function y(){q.value=!0,(0,H.verifyUserPasswordReset)(`?token=${w.value}`).then((e=>{v.value=!0})).catch((e=>{v.value=!1})).finally((()=>{q.value=!1}))}return(0,l.m0)((()=>{a.value.question1.options=r.value.filter((e=>e!=a.value.question2.question&&e!=a.value.question3.question)),a.value.question2.options=r.value.filter((e=>e!=a.value.question1.question&&e!=a.value.question3.question)),a.value.question3.options=r.value.filter((e=>e!=a.value.question1.question&&e!=a.value.question2.question))})),{submitting:u,userName:t,tabs:o,userNameForm:n,userSecurityQuestions:a,userQuestionsForm:i,confirmPassword:d,newPassword:m,passwordToggle:p,newPasswordForm:c,continuePasswordReset:v,verifying:q,submitUserNameData(){n.value.validate().then((e=>{e&&(u.value=!0,(0,H.verifyUserDetails)(`?username=${t.value}`).then((e=>{o.value=2,n.value.resetValidation(),r.value=e.data.map((e=>e.question))})).catch((e=>{(0,Z.displayNotification)("User name does not exist","negative","center")})).finally((()=>{u.value=!1})))}))},submitUserQuestions(){i.value.validate().then((e=>{e&&(u.value=!0,(0,H.verifyUserSecurityQuestions)({username:t.value,questions:[{id:0,question:a.value.question1.question,answer:a.value.question1.answer},{id:0,question:a.value.question2.question,answer:a.value.question2.answer},{id:0,question:a.value.question3.question,answer:a.value.question3.answer}]}).then((e=>{o.value=3,(0,Z.displayNotification)("Create new password for your account","primary"),w.value=e.data,y()})).catch((e=>{(0,Z.displayNotification)(e.response.data,"negative")})).finally((()=>{u.value=!1})))}))},submitNewPassword(){c.value.validate().then((s=>{s&&(u.value=!0,(0,H.userPasswordReset)(`?token=${w.value}`,{password:m.value}).then((s=>{(0,Z.displayNotification)(s.data,"positive"),e.push({name:"Login"})})).catch((e=>{(0,Z.displayNotification)(e.response.data,"negative"),v.value=!1})).finally((()=>{u.value=!1})))}))}}}});var z=t(1639),C=t(249),F=t(6602),L=t(2133),B=t(9885),D=t(9800),j=t(4106),A=t(4458),G=t(8326),$=t(3190),E=t(6611),J=t(8879),K=t(4581),M=t(854),O=t(8359),X=t(9984),Y=t.n(X);const ee=(0,z.Z)(T,[["render",R]]),se=ee;Y()(T,"components",{QLayout:C.Z,QHeader:F.Z,QPageContainer:L.Z,QPage:B.Z,QTabPanels:D.Z,QTabPanel:j.Z,QCard:A.Z,QForm:G.Z,QCardSection:$.Z,QInput:E.Z,QBtn:J.Z,QSelect:K.Z,QInnerLoading:M.Z,QSpinnerIos:O.Z})}}]);