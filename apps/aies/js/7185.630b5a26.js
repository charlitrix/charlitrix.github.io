"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[7185],{7185:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});var o=a(9835),t=a(6970);const i={class:"row justify-end q-mb-md"},n={class:"row no-wrap q-gutter-x-md"},s={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},u=(0,o._)("div",{class:"text-subtitle1"},"Number of rooms:",-1),d=(0,o._)("div",{class:"text-subtitle1"},"Rooms available:",-1),m={class:"row items-center justify-end"},r=(0,o._)("div",{class:"text-subtitle1"},"Adults Capacity:",-1),p=(0,o._)("div",{class:"text-subtitle1"},"Children Capacity:",-1),c={class:"column q-col-gutter-y-md q-mx-lg q-mb-lg"},b={class:"row no-wrap items-center q-col-gutter-x-md"},g=(0,o._)("div",null,"Per",-1);function w(e,l,a,w,y,R){const f=(0,o.up)("q-btn"),_=(0,o.up)("q-space"),v=(0,o.up)("q-select"),D=(0,o.up)("q-item-label"),h=(0,o.up)("q-item"),q=(0,o.up)("q-list"),V=(0,o.up)("q-td"),W=(0,o.up)("q-table"),k=(0,o.up)("q-page"),C=(0,o.up)("q-toolbar-title"),x=(0,o.up)("q-toolbar"),Z=(0,o.up)("q-separator"),S=(0,o.up)("q-input"),Q=(0,o.up)("q-time"),U=(0,o.up)("q-popup-proxy"),T=(0,o.up)("q-form"),z=(0,o.up)("q-card"),H=(0,o.up)("q-dialog"),I=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(k,{class:"q-ma-xl"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[e.permissionRequired("rooms","add_room")?((0,o.wg)(),(0,o.j4)(f,{key:0,rounded:"","no-caps":"",color:"primary",label:"Create Room",onClick:l[0]||(l[0]=l=>e.createDialog=!e.createDialog)})):(0,o.kq)("",!0),e.permissionRequired("rooms","add_salerates")?((0,o.wg)(),(0,o.j4)(f,{key:1,rounded:"","no-caps":"",color:"primary",class:"q-ml-md",label:"Create Sale Rates",onClick:l[1]||(l[1]=l=>e.addSaleRatesDialog=!e.addSaleRatesDialog)})):(0,o.kq)("",!0)]),(0,o.Wm)(W,{flat:"","wrap-cells":"","visible-columns":e.visibleColumns,loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Rooms","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No rooms available","loading-label":"Loading rooms..."},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(_),(0,o.Wm)(v,{dense:"",multiple:"",outlined:"","options-dense":"","options-cover":"","emit-value":"","map-options":"","option-value":"name","display-value":e.$q.lang.table.columns,options:e.tableColumns,modelValue:e.visibleColumns,"onUpdate:modelValue":l[2]||(l[2]=l=>e.visibleColumns=l)},null,8,["display-value","options","modelValue"])])),"body-cell-prices":(0,o.w5)((l=>[(0,o.Wm)(V,{props:l},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{dense:"",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.row.sale_rates,(l=>((0,o.wg)(),(0,o.j4)(h,{dense:"",key:l.id},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.formatPrice(l.amount))+" @ "+(0,t.zw)(l.unit),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-actions":(0,o.w5)((l=>[(0,o.Wm)(V,{props:l},{default:(0,o.w5)((()=>[(0,o._)("div",n,[e.permissionRequired("rooms","view_room")?((0,o.wg)(),(0,o.j4)(f,{key:0,round:"",unelevated:"",size:"sm",icon:"keyboard_arrow_right",color:"primary",to:{name:"BedRoomsDetails",params:{id:l.row.id}}},null,8,["to"])):(0,o.kq)("",!0),e.permissionRequired("rooms","delete_room")?((0,o.wg)(),(0,o.j4)(f,{key:1,round:"",unelevated:"",size:"sm",icon:"delete",color:"red",loading:e.submittingData,onClick:a=>e.showDeleteDialog(l.row.id)},null,8,["loading","onClick"])):(0,o.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["visible-columns","loading","columns","rows"])])),_:1}),(0,o.Wm)(H,{modelValue:e.createDialog,"onUpdate:modelValue":l[12]||(l[12]=l=>e.createDialog=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{style:{width:"600px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{ref:"createDialogForm",onSubmit:e.submitNewRoomData},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Create New Room")])),_:1}),(0,o.wy)((0,o.Wm)(f,{flat:"",round:"",size:"md",icon:"close"},null,512),[[I]])])),_:1}),(0,o.Wm)(Z),(0,o._)("div",s,[(0,o.Wm)(v,{"map-options":"","emit-value":"",modelValue:e.selectedRoomType,"onUpdate:modelValue":l[3]||(l[3]=l=>e.selectedRoomType=l),options:e.roomTypeOptions,loading:e.loadingRoomTypes,"option-label":"name","option-value":"id",label:"Type","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.roomTypeOptions.map((e=>e.id)))},null,8,["modelValue","options","loading","rules"]),(0,o.Wm)(S,{modelValue:e.newRoomData.name,"onUpdate:modelValue":l[4]||(l[4]=l=>e.newRoomData.name=l),modelModifiers:{trim:!0},label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,o.Wm)(S,{modelValue:e.newRoomData.description,"onUpdate:modelValue":l[5]||(l[5]=l=>e.newRoomData.description=l),modelModifiers:{trim:!0},label:"Description",type:"textarea",rows:"5","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,o.Wm)(S,{outlined:"",dense:"",modelValue:e.newRoomData.total_units,"onUpdate:modelValue":l[6]||(l[6]=l=>e.newRoomData.total_units=l),modelModifiers:{number:!0},type:"number","input-class":"text-center","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},{before:(0,o.w5)((()=>[u])),_:1},8,["modelValue","rules"]),(0,o.Wm)(S,{dense:"",outlined:"",modelValue:e.newRoomData.available_units,"onUpdate:modelValue":l[7]||(l[7]=l=>e.newRoomData.available_units=l),modelModifiers:{number:!0},type:"number","input-class":"text-center","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},{before:(0,o.w5)((()=>[d])),_:1},8,["modelValue","rules"]),(0,o.Wm)(S,{dense:"",readonly:"",label:"Check out time",modelValue:e.newRoomData.check_out_time,"onUpdate:modelValue":l[9]||(l[9]=l=>e.newRoomData.check_out_time=l)},{append:(0,o.w5)((()=>[(0,o.Wm)(f,{flat:"",round:"",size:"md",color:"grey",icon:"access_time"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{modelValue:e.newRoomData.check_out_time,"onUpdate:modelValue":l[8]||(l[8]=l=>e.newRoomData.check_out_time=l),mask:"hh:mm A"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.wy)((0,o.Wm)(f,{label:"Close",color:"primary",flat:""},null,512),[[I]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(S,{dense:"",outlined:"",modelValue:e.newRoomData.adults_capacity,"onUpdate:modelValue":l[10]||(l[10]=l=>e.newRoomData.adults_capacity=l),modelModifiers:{number:!0},"input-class":"text-center","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},{before:(0,o.w5)((()=>[r])),_:1},8,["modelValue","rules"]),(0,o.Wm)(S,{dense:"",outlined:"",modelValue:e.newRoomData.children_capacity,"onUpdate:modelValue":l[11]||(l[11]=l=>e.newRoomData.children_capacity=l),modelModifiers:{number:!0},"input-class":"text-center"},{before:(0,o.w5)((()=>[p])),_:1},8,["modelValue"]),(0,o._)("div",null,[(0,o.Wm)(f,{rounded:"",loading:e.submittingData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(H,{modelValue:e.addSaleRatesDialog,"onUpdate:modelValue":l[16]||(l[16]=l=>e.addSaleRatesDialog=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{style:{width:"700px",maxWidth:"700px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{ref:"addSaleRatesDialogForm",onSubmit:e.submitSalesRatesData},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Create Sales Rates")])),_:1}),(0,o.wy)((0,o.Wm)(f,{flat:"",round:"",size:"md",icon:"close"},null,512),[[I]])])),_:1}),(0,o.Wm)(Z),(0,o._)("div",c,[(0,o.Wm)(v,{"emit-value":"","map-options":"","use-input":"","hide-selected":"","fill-input":"",modelValue:e.selectedRoom,"onUpdate:modelValue":l[13]||(l[13]=l=>e.selectedRoom=l),loading:e.loadingData,options:e.tableRows,"option-label":"name","option-value":"id",label:"Room","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.tableRows.map((e=>e.id)))},null,8,["modelValue","loading","options","rules"]),(0,o._)("div",b,[(0,o.Wm)(S,{label:"Amount",type:"number",modelValue:e.saleRatesData.amount,"onUpdate:modelValue":l[14]||(l[14]=l=>e.saleRatesData.amount=l),modelModifiers:{number:!0},"lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","rules"]),g,(0,o.Wm)(S,{label:"Unit",hint:"For example night",modelValue:e.saleRatesData.unit,"onUpdate:modelValue":l[15]||(l[15]=l=>e.saleRatesData.unit=l),modelModifiers:{trim:!0},"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"])]),(0,o._)("div",null,[(0,o.Wm)(f,{rounded:"",color:"primary",label:"Create",class:"full-width",onLoading:e.submittingData,type:"submit"},null,8,["onLoading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var y=a(9302),R=a(499),f=a(4019),_=a(8221);const v=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"description",label:"Description",field:"description",sortable:!0,align:"left"},{name:"total_units",label:"Number of rooms",field:"total_units",sortable:!0,align:"left"},{name:"available_units",label:"Rooms available",field:"available_units",sortable:!0,align:"left"},{name:"adults_capacity",label:"Adults capacity",field:"adults_capacity",sortable:!0,align:"left"},{name:"children_capacity",label:"Children capacity",field:"children_capacity",sortable:!0,align:"left"},{name:"prices",label:"Prices",align:"left"},{name:"check_out_time",label:"Check out time",field:"check_out_time",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left",disable:!0}],D=(0,o.aZ)({name:"BedRooms",setup(){const e=(0,y.Z)(),l=(0,R.iH)([]),a=(0,R.iH)(!1),t=(0,R.iH)(!1),i=(0,R.iH)(null),n=(0,R.iH)([]),s=(0,R.iH)(!1),u=(0,R.iH)(null),d=(0,R.iH)({}),m=(0,R.iH)(!1),r=(0,R.iH)(null),p=(0,R.iH)(null),c=(0,R.iH)({}),b=(0,R.iH)(!1);function g(){return a.value=!0,(0,f.getRooms)().then((e=>{l.value=e.data})).catch((e=>{})).finally((()=>{a.value=!1}))}function w(){return s.value=!0,(0,f.getRoomTypes)().then((e=>{n.value=e.data})).finally((()=>{s.value=!1}))}return(0,o.bv)((()=>{g().then((()=>{w()}))})),{loadingData:a,tableRows:l,tableColumns:v,visibleColumns:(0,R.iH)(["id","name","total_unitss","available_units","adults_capacity","prices","check_out_time","actions"]),createDialog:t,createDialogForm:i,loadingRoomTypes:s,roomTypeOptions:n,selectedRoomType:u,newRoomData:d,submittingData:b,addSaleRatesDialog:m,addSaleRatesDialogForm:r,selectedRoom:p,saleRatesData:c,submitNewRoomData(){i.value.validate()&&(b.value=!0,(0,f.createRooms)(u.value,{...d.value}).then((e=>{(0,_.displayNotification)(e.data),u.value=null,d.value={},g(),t.value=!1,i.value.resetValidation()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{b.value=!1})))},submitSalesRatesData(){r.value.validate()&&(b.value=!0,(0,f.createRoomSaleRates)(p.value,{...c.value}).then((l=>{e.notify({type:"positive",message:l.data}),p.value=null,c.value={},m.value=!1,r.value.resetValidation(),g()})).catch((l=>{e.notify({type:"negative",message:l.response.data.length<50?l.response.data:"Server error please contact system administrator"})})).finally((()=>{b.value=!1})))},showDeleteDialog(l){e.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{b.value=!0,(0,f.deleteRooms)(l).then((e=>{(0,_.displayNotification)(e.data,"positive"),g()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{b.value=!1}))}))}}}});var h=a(1639),q=a(9885),V=a(8879),W=a(7355),k=a(136),C=a(4581),x=a(7220),Z=a(3246),S=a(490),Q=a(3115),U=a(2074),T=a(4458),z=a(8326),H=a(1663),I=a(1973),N=a(926),P=a(6611),M=a(2765),j=a(6770),F=a(2146),A=a(9984),L=a.n(A);const O=(0,h.Z)(D,[["render",w]]),B=O;L()(D,"components",{QPage:q.Z,QBtn:V.Z,QTable:W.Z,QSpace:k.Z,QSelect:C.Z,QTd:x.Z,QList:Z.Z,QItem:S.Z,QItemLabel:Q.Z,QDialog:U.Z,QCard:T.Z,QForm:z.Z,QToolbar:H.Z,QToolbarTitle:I.Z,QSeparator:N.Z,QInput:P.Z,QPopupProxy:M.Z,QTime:j.Z}),L()(D,"directives",{ClosePopup:F.Z})}}]);