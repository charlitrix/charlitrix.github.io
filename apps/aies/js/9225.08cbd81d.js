"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[9225],{9225:(e,a,l)=>{l.r(a),l.d(a,{default:()=>R});var t=l(9835),i=l(6970);const o={class:"row justify-end"},n={class:"row q-col-gutter-md"},u={class:"column justify-center"},s=(0,t._)("div",null,null,-1),d={class:"row no-wrap q-gutter-x-md"},r={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},m={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"};function c(e,a,l,c,p,g){const v=(0,t.up)("q-btn"),b=(0,t.up)("q-td"),w=(0,t.up)("q-table"),y=(0,t.up)("q-page"),f=(0,t.up)("q-toolbar-title"),D=(0,t.up)("q-toolbar"),q=(0,t.up)("q-separator"),_=(0,t.up)("q-input"),h=(0,t.up)("q-form"),U=(0,t.up)("q-card"),W=(0,t.up)("q-dialog"),k=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(y,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[e.permissionRequired("core","add_units")?((0,t.wg)(),(0,t.j4)(v,{key:0,rounded:"",color:"primary",label:"Create",onClick:a[0]||(a[0]=a=>e.createDialog=!e.createDialog)})):(0,t.kq)("",!0)]),(0,t.Wm)(w,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Units","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No units available","loading-label":"Loading items..."},{"body-cell-units_available":(0,t.w5)((e=>[(0,t.Wm)(b,{props:e},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",u,[(0,t._)("div",null,(0,i.zw)(e.value),1)]),s])])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((a=>[(0,t.Wm)(b,{props:a},{default:(0,t.w5)((()=>[(0,t._)("div",d,[e.permissionRequired("core","change_units")?((0,t.wg)(),(0,t.j4)(v,{key:0,round:"",unelevated:"",size:"sm",icon:"edit",color:"primary",onClick:l=>e.selectEditItem(a.rowIndex)},null,8,["onClick"])):(0,t.kq)("",!0),e.permissionRequired("core","delete_units")?((0,t.wg)(),(0,t.j4)(v,{key:1,round:"",unelevated:"",size:"sm",icon:"delete",color:"red",onClick:l=>e.deleteItem(a.row.id)},null,8,["onClick"])):(0,t.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,t.Wm)(W,{modelValue:e.createDialog,"onUpdate:modelValue":a[2]||(a[2]=a=>e.createDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{ref:"createDialogForm",onSubmit:e.submitUnitData},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Create New Unit")])),_:1}),(0,t.wy)((0,t.Wm)(v,{flat:"",round:"",size:"md",icon:"close"},null,512),[[k]])])),_:1}),(0,t.Wm)(q),(0,t._)("div",r,[(0,t.Wm)(_,{modelValue:e.unitData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.unitData.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(v,{rounded:"",loading:e.submittedUnitData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(W,{modelValue:e.updateDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.updateDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{ref:"updateDialogForm",onSubmit:e.updateUnitData},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{class:"bg-grey-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Update Unit")])),_:1}),(0,t.wy)((0,t.Wm)(v,{flat:"",round:"",size:"md",icon:"close"},null,512),[[k]])])),_:1}),(0,t.Wm)(q),(0,t._)("div",m,[(0,t.Wm)(_,{modelValue:e.editData.name,"onUpdate:modelValue":a[3]||(a[3]=a=>e.editData.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(v,{rounded:"",loading:e.submittedUnitData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var p=l(9302),g=l(499),v=l(4019);const b=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],w=(0,t.aZ)({name:"UnitsIndex",setup(){const e=(0,p.Z)(),a=(0,g.iH)([]),l=(0,g.iH)(!1),i=(0,g.iH)(!1),o=(0,g.iH)(null),n=(0,g.iH)(!1),u=(0,g.iH)({}),s=(0,g.iH)({}),d=(0,g.iH)(!1),r=(0,g.iH)(null);function m(){l.value=!0,(0,v.getUnits)().then((e=>{a.value=e.data})).catch((e=>{})).finally((()=>{l.value=!1}))}return(0,t.bv)((()=>{m()})),{loadingData:l,tableRows:a,tableColumns:b,unitData:u,createDialog:i,createDialogForm:o,submittedStockData:n,editData:s,updateDialog:d,updateDialogForm:r,selectEditItem(e){s.value={...a.value[e]},d.value=!0},updateUnitData(){if(r.value.validate()){n.value=!0;let a=s.value.id;delete s.value.id,(0,v.editUnits)(a,{...s.value}).then((a=>{e.notify({type:"positive",message:a.data}),s.value={},m(),d.value=!1,r.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1}))}},submitUnitData(){o.value.validate()&&(n.value=!0,(0,v.createUnits)({...u.value}).then((a=>{e.notify({type:"positive",message:a.data}),u.value={},m(),i.value=!1,o.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1})))},deleteItem(a){e.dialog({message:"Please confirm?",cancel:!0}).onOk((()=>{(0,v.deleteUnits)(a).then((a=>{e.notify({type:"positive",message:a.data}),m()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})}))}))}}}});var y=l(1639),f=l(9885),D=l(8879),q=l(7355),_=l(7220),h=l(2074),U=l(4458),W=l(8326),k=l(1663),Z=l(1973),C=l(926),V=l(6611),x=l(2146),Q=l(9984),H=l.n(Q);const I=(0,y.Z)(w,[["render",c]]),R=I;H()(w,"components",{QPage:f.Z,QBtn:D.Z,QTable:q.Z,QTd:_.Z,QDialog:h.Z,QCard:U.Z,QForm:W.Z,QToolbar:k.Z,QToolbarTitle:Z.Z,QSeparator:C.Z,QInput:V.Z}),H()(w,"directives",{ClosePopup:x.Z})}}]);