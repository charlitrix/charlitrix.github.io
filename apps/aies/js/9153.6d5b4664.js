"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[9153],{9153:(e,a,l)=>{l.r(a),l.d(a,{default:()=>x});var o=l(9835);const t={class:"row justify-end"},i={class:"row no-wrap q-gutter-x-md"},u={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},n={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"};function d(e,a,l,d,m,s){const r=(0,o.up)("q-btn"),p=(0,o.up)("q-td"),c=(0,o.up)("q-table"),g=(0,o.up)("q-page"),y=(0,o.up)("q-toolbar-title"),b=(0,o.up)("q-toolbar"),v=(0,o.up)("q-separator"),f=(0,o.up)("q-input"),w=(0,o.up)("q-form"),D=(0,o.up)("q-card"),q=(0,o.up)("q-dialog"),h=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(g,{class:"q-ma-xl"},{default:(0,o.w5)((()=>[(0,o._)("div",t,[e.permissionRequired("rooms","add_roomtype")?((0,o.wg)(),(0,o.j4)(r,{key:0,rounded:"",color:"primary",label:"Create",onClick:a[0]||(a[0]=a=>e.createDialog=!e.createDialog)})):(0,o.kq)("",!0)]),(0,o.Wm)(c,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Room Types","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No room types available","loading-label":"Loading room types..."},{"body-cell-actions":(0,o.w5)((a=>[(0,o.Wm)(p,{props:a},{default:(0,o.w5)((()=>[(0,o._)("div",i,[e.permissionRequired("rooms","change_roomtype")?((0,o.wg)(),(0,o.j4)(r,{key:0,round:"",unelevated:"",size:"sm",icon:"edit",color:"primary",onClick:l=>e.selectEditItem(a.rowIndex)},null,8,["onClick"])):(0,o.kq)("",!0),e.permissionRequired("rooms","delete_roomtype")?((0,o.wg)(),(0,o.j4)(r,{key:1,round:"",unelevated:"",size:"sm",icon:"delete",color:"red",loading:e.submittingData,onClick:l=>e.showDeleteDialog(a.row.id)},null,8,["loading","onClick"])):(0,o.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,o.Wm)(q,{modelValue:e.createDialog,"onUpdate:modelValue":a[2]||(a[2]=a=>e.createDialog=a)},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{style:{width:"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{ref:"createDialogForm",onSubmit:e.submitRoomTypeData},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Create New Room Type")])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",size:"md",icon:"close"},null,512),[[h]])])),_:1}),(0,o.Wm)(v),(0,o._)("div",u,[(0,o.Wm)(f,{modelValue:e.roomTypeData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.roomTypeData.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,o._)("div",null,[(0,o.Wm)(r,{rounded:"",loading:e.submittingData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(q,{modelValue:e.updateDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.updateDialog=a)},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{style:{width:"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{ref:"updateDialogForm",onSubmit:e.updateRoomTypeData},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Update Room Type")])),_:1}),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",size:"md",icon:"close"},null,512),[[h]])])),_:1}),(0,o.Wm)(v),(0,o._)("div",n,[(0,o.Wm)(f,{modelValue:e.editItem.name,"onUpdate:modelValue":a[3]||(a[3]=a=>e.editItem.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,o._)("div",null,[(0,o.Wm)(r,{rounded:"",loading:e.submittingData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var m=l(9302),s=l(499),r=l(4019),p=l(8221);const c=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],g=(0,o.aZ)({name:"RoomTypes",setup(){const e=(0,m.Z)(),a=(0,s.iH)([]),l=(0,s.iH)(!1),t=(0,s.iH)(!1),i=(0,s.iH)({}),u=(0,s.iH)(!1),n=(0,s.iH)({}),d=(0,s.iH)(null),g=(0,s.iH)(null),y=(0,s.iH)(!1);function b(){l.value=!0,(0,r.getRoomTypes)().then((e=>{a.value=e.data})).catch((e=>{})).finally((()=>{l.value=!1}))}return(0,o.bv)((()=>{b()})),{loadingData:l,tableRows:a,tableColumns:c,roomTypeData:i,createDialog:t,updateDialog:u,editItem:n,createDialogForm:d,updateDialogForm:g,submittingData:y,selectEditItem(e){n.value={...a.value[e]},u.value=!0},submitRoomTypeData(){d.value.validate()&&(y.value=!0,(0,r.createRoomTypes)({...i.value}).then((e=>{(0,p.displayNotification)(e.data,"positive"),i.value={},b(),t.value=!1,d.value.resetValidation()})).catch((e=>{(0,p.displayNotification)(e.response.data,"negative")})).finally((()=>{y.value=!1})))},updateRoomTypeData(){if(g.value.validate()){y.value=!0;let e=n.value.id;delete n.value.id,(0,r.editRoomTypes)(e,{...n.value}).then((e=>{(0,p.displayNotification)(e.data,"positive"),n.value={},b(),u.value=!1,g.value.resetValidation()})).catch((e=>{(0,p.displayNotification)(e.response.data,"negative")})).finally((()=>{y.value=!1}))}},showDeleteDialog(a){e.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{y.value=!0,(0,r.deleteRoomTypes)(a).then((e=>{(0,p.displayNotification)(e.data,"positive"),b()})).catch((e=>{(0,p.displayNotification)(e.response.data,"negative")})).finally((()=>{y.value=!1}))}))}}}});var y=l(1639),b=l(9885),v=l(8879),f=l(7355),w=l(7220),D=l(2074),q=l(4458),h=l(8326),T=l(1663),_=l(1973),R=l(926),W=l(6611),k=l(2146),C=l(9984),Z=l.n(C);const V=(0,y.Z)(g,[["render",d]]),x=V;Z()(g,"components",{QPage:b.Z,QBtn:v.Z,QTable:f.Z,QTd:w.Z,QDialog:D.Z,QCard:q.Z,QForm:h.Z,QToolbar:T.Z,QToolbarTitle:_.Z,QSeparator:R.Z,QInput:W.Z}),Z()(g,"directives",{ClosePopup:k.Z})}}]);