"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[4462],{1693:(e,l,a)=>{a.r(l),a.d(l,{default:()=>P}),a(9665);var t=a(9835);const i={class:"row justify-end q-mb-md"},o={class:"row"},n={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},s={class:"row justify-between"},d=(0,t._)("div",{class:"text-h6"},"Fields",-1),u=(0,t._)("div",{class:"q-mb-md"}," The fields added below will added on to existing fields when entering data ",-1),r={key:0},c={key:1,class:"bg-grey-3 q-pa-xl"},m=(0,t._)("div",{class:"text-grey-6 text-center text-h3"},"No fields",-1),g=[m];function p(e,l,a,m,p,b){const f=(0,t.up)("q-btn"),w=(0,t.up)("q-toggle"),v=(0,t.up)("q-td"),q=(0,t.up)("q-table"),k=(0,t.up)("q-page"),_=(0,t.up)("q-toolbar-title"),h=(0,t.up)("q-toolbar"),y=(0,t.up)("q-separator"),S=(0,t.up)("q-select"),C=(0,t.up)("q-input"),W=(0,t.up)("q-item-label"),Z=(0,t.up)("q-item-section"),D=(0,t.up)("q-item"),Q=(0,t.up)("q-list"),F=(0,t.up)("q-card"),V=(0,t.up)("q-dialog"),x=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(k,{class:"q-pa-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[e.permissionRequired("accounts","add_featuresettings")?((0,t.wg)(),(0,t.j4)(f,{key:0,color:"primary",label:"Create",onClick:l[0]||(l[0]=l=>e.createDialog=!e.createDialog),disabled:!(e.fiscalYear.value&&e.fiscalYear.value.id)},null,8,["disabled"])):(0,t.kq)("",!0)]),(0,t.Wm)(q,{flat:"",class:"q-ma-sm",rows:e.tableRows,columns:e.tableColumns,loading:e.loadingData,"no-data-label":"No data available","loading-label":"Loading data...","row-key":"id",pagination:{rowsPerPage:0},"table-header-class":"bg-primary text-white"},{"body-cell-status":(0,t.w5)((e=>[(0,t.Wm)(v,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{"model-value":e.row.enabled,"checked-icon":"check",color:"green",label:e.row.enabled?"ON":"OFF","unchecked-icon":"clear"},null,8,["model-value","label"])])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((l=>[(0,t.Wm)(v,{props:l},{default:(0,t.w5)((()=>[(0,t._)("div",o,[e.permissionRequired("accounts","change_featuresettings")?((0,t.wg)(),(0,t.j4)(f,{key:0,round:"",icon:"edit",size:"sm",color:"primary",onClick:a=>e.$router.push({name:"DocumentSettingsDetails",params:{id:l.row.id}})},null,8,["onClick"])):(0,t.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading"])])),_:1}),(0,t.Wm)(V,{modelValue:e.createDialog,"onUpdate:modelValue":l[2]||(l[2]=l=>e.createDialog=l)},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{style:{width:"600px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Uk)("New Setting")])),_:1}),(0,t.wy)((0,t.Wm)(f,{flat:"",round:"",size:"md",icon:"close"},null,512),[[x]])])),_:1}),(0,t.Wm)(y),(0,t._)("div",n,[(0,t.Wm)(S,{"emit-value":"","map-options":"",modelValue:e.setting.item,"onUpdate:modelValue":l[1]||(l[1]=l=>e.setting.item=l),options:e.documentsList,label:"Name"},null,8,["modelValue","options"]),(0,t._)("div",s,[d,(0,t._)("div",null,[(0,t.Wm)(f,{"no-caps":"",label:"Add Field",color:"primary",onClick:e.addField},null,8,["onClick"])])]),u,e.setting.fields.length>0?((0,t.wg)(),(0,t.iD)("div",r,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.setting.fields,((l,a)=>((0,t.wg)(),(0,t.j4)(Q,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{dense:"",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,outlined:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(Z,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{round:"",color:"red",icon:"delete",onClick:l=>e.removeField(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])):((0,t.wg)(),(0,t.iD)("div",c,g)),(0,t._)("div",null,[(0,t.Wm)(f,{rounded:"",loading:e.submittingSettingData,color:"primary",label:"Create",class:"full-width",onClick:e.createSetting},null,8,["loading","onClick"])])])])),_:1})])),_:1},8,["modelValue"])],64)}var b=a(499),f=a(4019),w=a(1809),v=a(1353),q=a(9302),k=a(8221);const _=[{name:"id",label:"#",field:"id",align:"left",sortable:!0},{name:"name",label:"Name",field:e=>e.item.replace("_"," "),align:"left",sortable:!0},{name:"status",label:"Status",align:"left"},{name:"actions",label:"Actions",align:"left"}],h=(0,t.aZ)({name:"DocumentSettings",setup(){const e=(0,v.F)(),l=(0,q.Z)(),{fiscalYear:a}=(0,w.Jk)(e),i=(0,b.iH)([]),o=(0,b.iH)(!1),n=(0,b.iH)(!1),s=(0,b.iH)(!1),d=(0,b.iH)({fields:[]}),u=[{label:"LEDGERS",value:"LEDGERS"},{label:"CASH ANALYSIS",value:"CASH_ANALYSIS"},{label:"VOTE BOOK",value:"VOTE_BOOK"}],r=(0,b.iH)({});function c(){a.value.id&&(0,f.getFiscalYearFeatureSettings)(a.value.id).then((e=>{i.value=e.data}))}return(0,t.bv)((()=>{c()})),{fiscalYear:a,tableRows:i,loadingData:o,tableColumns:_,createDialog:n,setting:d,submittingSettingData:s,documentsList:u,selectedEditSetting:r,addField(){d.value.fields.push({})},removeField(e){l.dialog({title:"Confirmation",message:"Please Confirm ?",cancel:!0}).onOk((()=>{d.value.fields.splice(e,1)}))},createSetting(){s.value=!0,(0,f.createFeatureSettings)(a.value.id,{item:d.value.item,enabled:!0,details:{fields:d.value.fields}}).then((e=>{(0,k.displayNotification)(e.data,"positive"),c(),n.value=!1})).catch((e=>{(0,k.displayNotification)(e.response.data.length<1e3?e.response.data:"Server error please contact system administrator","negative")})).finally((()=>{s.value=!1}))}}}});var y=a(1639),S=a(9885),C=a(8879),W=a(7355),Z=a(7220),D=a(3175),Q=a(2074),F=a(4458),V=a(1663),x=a(1973),T=a(926),H=a(4581),N=a(3246),L=a(490),O=a(1233),Y=a(3115),A=a(6611),E=a(2146),I=a(9984),R=a.n(I);const j=(0,y.Z)(h,[["render",p]]),P=j;R()(h,"components",{QPage:S.Z,QBtn:C.Z,QTable:W.Z,QTd:Z.Z,QToggle:D.Z,QDialog:Q.Z,QCard:F.Z,QToolbar:V.Z,QToolbarTitle:x.Z,QSeparator:T.Z,QSelect:H.Z,QList:N.Z,QItem:L.Z,QItemSection:O.Z,QItemLabel:Y.Z,QInput:A.Z}),R()(h,"directives",{ClosePopup:E.Z})}}]);