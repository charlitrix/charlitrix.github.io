"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[9880],{9880:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var l=t(9835),n=t(6970);const o={class:"q-mt-md"},d={class:"row"},u=(0,l._)("div",{class:"text-weight-bold"},"Amount Sanctioned:",-1),i={class:"q-px-lg"};function r(e,a,t,r,s,m){const c=(0,l.up)("q-breadcrumbs-el"),p=(0,l.up)("q-breadcrumbs"),b=(0,l.up)("q-td"),w=(0,l.up)("q-table"),f=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(f,{class:"q-pa-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{to:{name:"VoteBook"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Vote Book ")])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.budgetItem.name),1)])),_:1})])),_:1}),(0,l._)("div",o,[(0,l.Wm)(w,{flat:"",bordered:"",separator:"vertical",rows:e.tableRows,columns:e.tableColumns,loading:e.loadingData,"no-data-label":"No data available","loading-label":"Loading data...","row-key":"id",pagination:{rowsPerPage:0}},{top:(0,l.w5)((()=>[(0,l._)("div",d,[u,(0,l._)("div",i,(0,n.zw)(e.formatPrice(e.amountSanctioned)),1)])])),"body-cell-amount":(0,l.w5)((a=>[(0,l.Wm)(b,{props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.formatPrice(a.value)),1)])),_:2},1032,["props"])])),"body-cell-total_expense":(0,l.w5)((a=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.formatPrice(e.computedTotalExpense(a.rowIndex))),1)])),_:2},1024)])),"body-cell-unexpended_balance":(0,l.w5)((a=>[e.amountSanctioned-e.computedTotalExpense(a.rowIndex)>0?((0,l.wg)(),(0,l.j4)(b,{key:0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.formatPrice(e.amountSanctioned-e.computedTotalExpense(a.rowIndex))),1)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(b,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)("("+(0,n.zw)(e.formatPrice(e.amountSanctioned-e.computedTotalExpense(a.rowIndex)))+")",1)])),_:2},1024))])),"body-cell-date":(0,l.w5)((a=>[(0,l.Wm)(b,{props:a},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.parseDate(a.value)),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading"])])])),_:1})}var s=t(499),m=t(9302),c=t(4170),p=t(1353),b=t(1809),w=t(4019);const f=[{name:"id",label:"#",field:"id",align:"left",sortable:!0},{name:"date",label:"Date",field:"date",align:"left",sortable:!0},{name:"description",label:"Description",field:"description",align:"left",sortable:!0},{name:"amount",label:"Amount",field:"amount",align:"left",sortable:!0},{name:"total_expense",label:"Total Expense",align:"left"},{name:"unexpended_balance",label:"Unexpended Balance",align:"left"}],g=(0,l.aZ)({name:"VoteBookDetails",props:["itemName","itemId"],setup(e){(0,m.Z)();const a=(0,p.F)(),{fiscalYear:t}=(0,b.Jk)(a),n=(0,s.iH)(!1),o=[...f],d=(0,s.iH)([]),u=(0,s.iH)(!1),i=(0,s.iH)(!1),r=(0,s.iH)(c.ZP.formatDate(new Date,"YYYY-MM-DD")),g=(0,s.iH)({}),D=(0,s.iH)([]),v=(0,s.iH)({}),Y=(0,s.iH)({}),x=(0,s.iH)([]),_=(0,l.Fl)((()=>c.ZP.formatDate(c.ZP.extractDate(r.value,"YYYY-MM-DD"),"DD/MM/YYYY"))),k=(0,l.Fl)((()=>Y.value.amount?Y.value.amount:"")),y=(0,s.iH)(null);function P(){(0,w.getBudgetItem)(e.itemId).then((e=>{Y.value=e.data,Y.value.id&&(0,w.getFiscalYearAccounts)(t.value.id,`?name=${Y.value.name}&budget_item=True`).then((e=>{v.value=e.data,v.value.id&&Z()}))}))}function Z(){(0,w.getAccountJournalsBy)(v.value.id,"?entry_type=DEBIT").then((e=>{d.value=e.data}))}return(0,l.bv)((()=>{P()})),{fiscalYear:t,addEntry:n,tableColumns:o,tableRows:d,loadingData:u,submittingEntry:i,tnDate:r,ledgerEntry:g,additionalColumns:D,account:v,budgetItem:Y,budgetItems:x,tnDateProxy:y,formatDate:_,amountSanctioned:k,computedTotalExpense(e){return d.value.slice(0,e+1).reduce(((e,a)=>e+a.amount),0)},tnDateChanged(e){const a=c.ZP.extractDate(e,"YYYY-MM-DD");toDate.value=c.ZP.formatDate(c.ZP.addToDate(a,{months:12,days:-1}),"YYYY-MM-DD"),y.value.hide()}}}});var D=t(1639),v=t(9885),Y=t(2605),x=t(8052),_=t(7355),k=t(7220),y=t(9984),P=t.n(y);const Z=(0,D.Z)(g,[["render",r]]),T=Z;P()(g,"components",{QPage:v.Z,QBreadcrumbs:Y.Z,QBreadcrumbsEl:x.Z,QTable:_.Z,QTd:k.Z})}}]);