"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[2711],{2711:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});t(6727);var l=t(9835),n=t(6970);const o=(0,l._)("div",{class:"text-h5 text-grey-9"},"Accounts",-1),i={class:"row justify-end"},c={class:"q-pt-md"},s={key:0},r={key:0},u={key:1},d={key:0,class:"text-green"},m={key:1,class:"text-red"},g={class:"row no-wrap q-gutter-x-sm"};function p(e,a,t,p,w,b){const f=(0,l.up)("q-btn"),k=(0,l.up)("q-td"),y=(0,l.up)("q-tr"),_=(0,l.up)("q-table"),q=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(q,{class:"q-pa-xl"},{default:(0,l.w5)((()=>[o,(0,l._)("div",i,[e.permissionRequired("accounts","add_account")?((0,l.wg)(),(0,l.j4)(f,{key:0,color:"primary",label:"Create",to:{name:"AccountsCreate"}})):(0,l.kq)("",!0)]),(0,l._)("div",c,[(0,l.Wm)(_,{flat:"",bordered:"","wrap-cells":"",separator:"vertical",rows:e.tableRows,columns:e.tableColumns,loading:e.loadingData,"no-data-label":"No data available","loading-label":"Loading data...","row-key":"id","hide-pagination":"",pagination:{rowsPerPage:0}},{body:(0,l.w5)((a=>["NO_CATEGORY_AVAILABLE"!=a.row.name?((0,l.wg)(),(0,l.j4)(y,{key:0,class:"bg-blue-1",props:a},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{colspan:"8"},{default:(0,l.w5)((()=>[(0,l._)("span",{class:"text-weight-medium text-capitalize text-grey-10",style:(0,n.j5)({fontSize:".8rem"})},(0,n.zw)(a.row.name),5),e.permissionRequired("accounts","change_account")&&e.accountEditable(a.row)?((0,l.wg)(),(0,l.j4)(f,{key:0,rounded:"",outline:"",size:".8rem",color:"primary",class:"q-ml-xl",label:"Edit","icon-right":"edit",to:{name:"AccountsEdit",params:{id:a.row.id}}},null,8,["to"])):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["props"])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.row.accounts,((a,t)=>((0,l.wg)(),(0,l.j4)(y,{key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(k),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[a.code.includes("_")?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",s,(0,n.zw)(a.code),1))])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.name),1)])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[a.opening_balance>=0?((0,l.wg)(),(0,l.iD)("span",r,(0,n.zw)(e.formatPrice(a.opening_balance)),1)):((0,l.wg)(),(0,l.iD)("span",u,"("+(0,n.zw)(e.formatPrice(a.opening_balance))+")",1))])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.parseDate(a.date)),1)])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.accounttype.name),1)])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>["OPEN"==a.state?((0,l.wg)(),(0,l.iD)("span",d," Open ")):((0,l.wg)(),(0,l.iD)("span",m," Closed "))])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[e.permissionRequired("accounts","change_account")&&e.accountEditable(a)?((0,l.wg)(),(0,l.j4)(f,{key:0,flat:"",round:"",dense:"",color:"primary",icon:"edit",to:{name:"AccountsDetailsEdit",params:{id:a.id}}},null,8,["to"])):(0,l.kq)("",!0),e.permissionRequired("accounts","view_accountjournals")?((0,l.wg)(),(0,l.j4)(f,{key:1,flat:"",round:"",dense:"",size:"sm",color:"primary",icon:"receipt",to:{name:"AccountLedgers",params:{accountId:a.id,accountName:a.name}}},null,8,["to"])):(0,l.kq)("",!0),e.permissionRequired("accounts","change_account")&&e.accountEditable(a)?((0,l.wg)(),(0,l.j4)(f,{key:2,flat:"",round:"",dense:"",size:"sm",color:"red",icon:"delete",onClick:t=>e.deleteAccount(a.id)},null,8,["onClick"])):(0,l.kq)("",!0)])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["rows","columns","loading"])])])),_:1})}var w=t(499),b=t(9302),f=t(1809),k=t(4019),y=t(8221),_=t(1353);const q=[{name:"account_category",label:"Account Category",align:"left",sortable:!0},{name:"code",label:"Code",align:"left",sortable:!0},{name:"name",label:"Name",align:"left",sortable:!0},{name:"opening_balance",label:"Opening Balance",align:"left",sortable:!0},{name:"date",label:"Date",align:"left",sortable:!0},{name:"type",label:"Type",align:"left",sortable:!0},{name:"state",label:"State",align:"left",sortable:!0},{name:"actions",label:"Actions",align:"center"}],v=(0,l.aZ)({name:"AccountsList",setup(){const e=(0,_.F)(),a=(0,b.Z)(),{fiscalYear:t}=(0,f.Jk)(e),n=(0,w.iH)(!0),o=(0,w.iH)([]);function i(){n.value=!0,o.value=[],(0,k.getFiscalYearAccountCategories)(t.value.id,"?accounts=True").then((e=>{o.value=e.data})).finally((()=>{n.value=!1}))}return(0,l.bv)((()=>{i()})),{tableColumns:q,tableRows:o,loadingData:n,accountEditable(e){return!Object.keys(e.additional_data).includes("editable")||e.additional_data.editable},deleteAccount(e){a.dialog({title:"Confirm",message:"Please confirm?",cancel:!0}).onOk((()=>{n.value=!0,(0,k.deleteFiscalYearAccounts)(t.value.id,`?account=${e}`).then((e=>{(0,y.displayNotification)(e.data,"positive"),i()})).catch((e=>{(0,y.displayNotification)(e.response.data,"negative")})).finally((()=>{n.value=!1}))}))}}}});var A=t(1639),h=t(9885),C=t(8879),j=t(7355),z=t(3532),D=t(7220),x=t(9984),E=t.n(x);const W=(0,A.Z)(v,[["render",p]]),R=W;E()(v,"components",{QPage:h.Z,QBtn:C.Z,QTable:j.Z,QTr:z.Z,QTd:D.Z})}}]);