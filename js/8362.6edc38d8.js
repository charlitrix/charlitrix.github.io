"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[8362],{8362:(e,a,l)=>{l.r(a),l.d(a,{default:()=>X});var t=l(9835),u=l(6970);const o={class:"q-px-xl q-py-md q-mb-xl column q-col-gutter-lg"},n={class:"q-mt-md"},i={class:"q-px-xl q-pb-xl column q-col-gutter-md"},s={class:"column q-mb-lg"},c={class:"row justify-between"},d={class:"full-width"},m={key:0},r=(0,t._)("span",{else:""}," -- ",-1),p={class:"column q-col-gutter-y-md q-px-md q-pb-lg"};function b(e,a,l,b,y,g){const f=(0,t.up)("q-breadcrumbs-el"),_=(0,t.up)("q-breadcrumbs"),W=(0,t.up)("q-tab"),w=(0,t.up)("q-tabs"),v=(0,t.up)("q-select"),V=(0,t.up)("q-input"),q=(0,t.up)("q-checkbox"),h=(0,t.up)("q-btn"),A=(0,t.up)("q-form"),I=(0,t.up)("q-tab-panel"),D=(0,t.up)("q-separator"),C=(0,t.up)("q-item-label"),x=(0,t.up)("q-item-section"),T=(0,t.up)("q-item"),Z=(0,t.up)("q-list"),k=(0,t.up)("q-field"),U=(0,t.up)("q-tab-panels"),Q=(0,t.up)("q-page"),S=(0,t.up)("q-toolbar-title"),z=(0,t.up)("q-toolbar"),H=(0,t.up)("q-card-section"),R=(0,t.up)("q-card-actions"),O=(0,t.up)("q-card"),F=(0,t.up)("q-dialog"),L=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(Q,{class:"q-pa-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,{to:{name:"AccountsList"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Accounts")])),_:1}),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Create")])),_:1})])),_:1}),(0,t._)("div",null,[(0,t.Wm)(w,{"inline-label":"",align:"justify",class:"text-primary",modelValue:e.createAccountTabs,"onUpdate:modelValue":a[0]||(a[0]=a=>e.createAccountTabs=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{"no-caps":"",name:"create-account",label:"Create Account"}),(0,t.Wm)(W,{"no-caps":"",name:"create-account-with-category",label:"Create Accounts With Category"})])),_:1},8,["modelValue"]),(0,t.Wm)(U,{animated:"",modelValue:e.createAccountTabs,"onUpdate:modelValue":a[10]||(a[10]=a=>e.createAccountTabs=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{name:"create-account"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{ref:"createAccountForm",onSubmit:e.submitAccountData},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(v,{"emit-value":"","map-options":"",loading:e.loadingOptions,modelValue:e.accountData.account_type,"onUpdate:modelValue":a[1]||(a[1]=a=>e.accountData.account_type=a),options:e.accountTypesOptions,"option-label":"name","option-value":"id",label:"Type","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.accountTypesOptions.map((e=>e.id)))},null,8,["loading","modelValue","options","rules"]),(0,t.Wm)(V,{modelValue:e.accountData.code,"onUpdate:modelValue":a[2]||(a[2]=a=>e.accountData.code=a),modelModifiers:{trim:!0},label:"Code",type:"text"},null,8,["modelValue"]),(0,t.Wm)(V,{modelValue:e.accountData.name,"onUpdate:modelValue":a[3]||(a[3]=a=>e.accountData.name=a),modelModifiers:{trim:!0},label:"Name",type:"text","input-class":"text-capitalize","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t.Wm)(V,{modelValue:e.accountData.opening_balance,"onUpdate:modelValue":a[4]||(a[4]=a=>e.accountData.opening_balance=a),modelModifiers:{number:!0},label:"Opening balance",type:"number","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","rules"]),(0,t.Wm)(q,{modelValue:e.accountData.cash_analysis,"onUpdate:modelValue":a[5]||(a[5]=a=>e.accountData.cash_analysis=a),label:"Add to Cash Analysis"},null,8,["modelValue"]),(0,t._)("div",n,[(0,t.Wm)(h,{label:"Submit",color:"primary",class:"full-width",type:"submit",loading:e.submitting},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1}),(0,t.Wm)(I,{name:"create-account-with-category"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{ref:"createAccountWithCategoryForm",onSubmit:e.submitAccountWithCategoryData},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t._)("div",null,[(0,t._)("div",{class:"text-grey-9 q-mb-md",style:(0,u.j5)({fontSize:"1.2rem"})}," Category ",4),(0,t._)("div",s,[(0,t.Wm)(V,{label:"Code",modelValue:e.categoryData.code,"onUpdate:modelValue":a[6]||(a[6]=a=>e.categoryData.code=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),(0,t.Wm)(V,{label:"Name",modelValue:e.categoryData.name,"onUpdate:modelValue":a[7]||(a[7]=a=>e.categoryData.name=a),modelModifiers:{trim:!0},"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"])])]),(0,t._)("div",c,[(0,t._)("div",{class:"text-grey-9",style:(0,u.j5)({fontSize:"1.2rem"})}," Accounts ",4),(0,t.Wm)(h,{color:"primary",class:"q-px-xl",label:"Add",onClick:a[8]||(a[8]=a=>e.addSubItemDialog=!e.addSubItemDialog)})]),(0,t._)("div",null,[(0,t.Wm)(D),(0,t.Wm)(k,{outlined:"",modelValue:e.subItemsDataList,"onUpdate:modelValue":a[9]||(a[9]=a=>e.subItemsDataList=a),"lazy-rules":"ondemand",rules:e.nonEmptyRequiredRules("Cannot submit category without accounts")},{control:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Uk)("Code")])),_:1})])),_:1}),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Uk)("Name")])),_:1})])),_:1}),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Uk)("Opening Balance")])),_:1})])),_:1}),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Uk)("Type")])),_:1})])),_:1}),(0,t.Wm)(x,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Uk)("Actions")])),_:1})])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.subItemsDataList,((a,l)=>((0,t.wg)(),(0,t.j4)(T,{key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[a.code?((0,t.wg)(),(0,t.iD)("span",m,(0,u.zw)(a.code),1)):(0,t.kq)("",!0),r])),_:2},1024)])),_:2},1024),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.formatPrice(a.opening_balance)),1)])),_:2},1024),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.accountType.name),1)])),_:2},1024),(0,t.Wm)(x,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{flat:"",round:"",color:"red",icon:"delete",onClick:a=>e.deleteSubItem(l)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])),_:1},8,["modelValue","rules"])]),(0,t._)("div",null,[(0,t.Wm)(h,{label:"Submit",color:"primary",class:"full-width",type:"submit",loading:e.submitting},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(F,{persistent:"",modelValue:e.addSubItemDialog,"onUpdate:modelValue":a[16]||(a[16]=a=>e.addSubItemDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(O,{style:{width:"600px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{ref:"subItemForm",onSubmit:e.addSubItem},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Uk)("New Account")])),_:1}),(0,t.wy)((0,t.Wm)(h,{flat:"",round:"",size:"md",icon:"close"},null,512),[[L]])])),_:1}),(0,t.Wm)(D),(0,t.Wm)(D,{inset:""}),(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t.Wm)(v,{"map-options":"",loading:e.loadingOptions,modelValue:e.subItem.accountType,"onUpdate:modelValue":a[11]||(a[11]=a=>e.subItem.accountType=a),options:e.accountTypesOptions,"option-label":"name",label:"Type","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.accountTypesOptions)},null,8,["loading","modelValue","options","rules"]),(0,t.Wm)(V,{modelValue:e.subItem.code,"onUpdate:modelValue":a[12]||(a[12]=a=>e.subItem.code=a),modelModifiers:{trim:!0},label:"Code"},null,8,["modelValue"]),(0,t.Wm)(V,{modelValue:e.subItem.name,"onUpdate:modelValue":a[13]||(a[13]=a=>e.subItem.name=a),modelModifiers:{trim:!0},label:"Name","input-class":"text-capitalize","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t.Wm)(V,{modelValue:e.subItem.opening_balance,"onUpdate:modelValue":a[14]||(a[14]=a=>e.subItem.opening_balance=a),modelModifiers:{number:!0},label:"Opening Balance",type:"number","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","rules"]),(0,t.Wm)(q,{modelValue:e.subItem.cash_analysis,"onUpdate:modelValue":a[15]||(a[15]=a=>e.subItem.cash_analysis=a),label:"Add to Cash Analysis"},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(R,{align:"evenly",class:"q-mb-lg q-mx-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{rounded:"",class:"full-width",label:"Add",type:"submit",color:"primary"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}l(9665);var y=l(499),g=l(9302),f=l(1809),_=l(8339),W=l(4019),w=l(1353),v=l(8221);const V=(0,t.aZ)({name:"AccountsCreate",setup(){const e=(0,g.Z)(),a=(0,_.tv)(),l=(0,w.F)(),{fiscalYear:u}=(0,f.Jk)(l),o={opening_balance:0,code:"",cash_analysis:!1},n=(0,y.iH)("create"),i=(0,y.iH)("create-account"),s=(0,y.iH)(!1),c=(0,y.iH)({code:"",cash_analysis:!1,opening_balance:0}),d=(0,y.iH)(null),m=(0,y.iH)([]),r=(0,y.iH)(!0),p=(0,y.iH)({}),b=(0,y.iH)({code:""}),V=(0,y.iH)({...o}),q=(0,y.iH)([]),h=(0,y.iH)(!1),A=(0,y.iH)(null),I=(0,y.iH)(null),D=(0,y.iH)(null);return(0,t.bv)((()=>{r.value=!0,(0,W.getFiscalYearAccountTypes)(u.value.id).then((e=>{m.value=e.data})).finally((()=>{r.value=!1,(0,W.getFiscalYearAccountCategories)(u.value.id,"?name=NO_CATEGORY_AVAILABLE").then((e=>{p.value=e.data}))}))})),{fiscalYear:u,tab:n,createAccountTabs:i,submitting:s,accountData:c,accountType:d,accountTypesOptions:m,loadingOptions:r,noCategoryAccountData:p,categoryData:b,subItem:V,subItemsDataList:q,addSubItemDialog:h,createAccountForm:A,createAccountWithCategoryForm:I,subItemForm:D,deleteSubItem(a){e.dialog({title:"Confirm",message:"Are you sure?",persistent:!0,cancel:!0}).onOk((()=>{q.value.splice(a,1)}))},addSubItem(){D.value.validate().then((e=>{e&&(q.value.push({...V.value}),V.value={...o},h.value=!1,I.value.resetValidation())}))},submitAccountData(){A.value.validate().then((l=>{l&&e.dialog({title:"Confirm ?",message:"Please confirm",cancel:!0,persistent:!0}).onOk((()=>{s.value=!0,(0,W.createFiscalYearAccount)(u.value.id,{...p.value,accounts:[c.value]}).then((e=>{(0,v.displayNotification)(e.data,"positive"),c.value={},A.value.resetValidation(),a.push({name:"AccountsList"})})).catch((e=>{(0,v.displayNotification)(e.response.data,"negative")})).finally((()=>{s.value=!1,n.value="listing"}))}))}))},submitAccountWithCategoryData(){I.value.validate().then((l=>{e.dialog({title:"Confirm ?",message:"Please confirm",cancel:!0,persistent:!0}).onOk((()=>{s.value=!0;let e=q.value.map((e=>{let a={...e};return a.account_type=a.accountType.id,delete a.accountType,a}));(0,W.createFiscalYearAccount)(u.value.id,{...b.value,accounts:e}).then((e=>{(0,v.displayNotification)(e.data,"positive"),a.push({name:"AccountsList"}),b.value={code:""},I.value.resetValidation()})).catch((e=>{(0,v.displayNotification)(e.response.data,"negative")})).finally((()=>{s.value=!1,n.value="listing"}))}))}))}}}});var q=l(1639),h=l(9885),A=l(2605),I=l(8052),D=l(7817),C=l(900),x=l(9800),T=l(4106),Z=l(8326),k=l(4581),U=l(6611),Q=l(1221),S=l(8879),z=l(926),H=l(8149),R=l(3246),O=l(490),F=l(1233),L=l(3115),N=l(2074),Y=l(4458),M=l(1663),P=l(1973),B=l(3190),j=l(1821),E=l(2146),G=l(9984),J=l.n(G);const K=(0,q.Z)(V,[["render",b]]),X=K;J()(V,"components",{QPage:h.Z,QBreadcrumbs:A.Z,QBreadcrumbsEl:I.Z,QTabs:D.Z,QTab:C.Z,QTabPanels:x.Z,QTabPanel:T.Z,QForm:Z.Z,QSelect:k.Z,QInput:U.Z,QCheckbox:Q.Z,QBtn:S.Z,QSeparator:z.Z,QField:H.Z,QList:R.Z,QItem:O.Z,QItemSection:F.Z,QItemLabel:L.Z,QDialog:N.Z,QCard:Y.Z,QToolbar:M.Z,QToolbarTitle:P.Z,QCardSection:B.Z,QCardActions:j.Z}),J()(V,"directives",{ClosePopup:E.Z})}}]);