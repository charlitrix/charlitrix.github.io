"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[8409],{8409:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ae});var t=n(9835),a=n(6970);const o={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},u={class:"row items-center justify-end"},i={class:"row q-col-gutter-x-lg"},r={class:"col-md-6"},d={class:"col-md-6"},m={class:"row justify-start"},s={key:0,class:"flex flex-center"},c={class:"row items-center justify-center q-col-gutter-x-md"},p={class:"col-6"},_={class:"col-6 column q-col-gutter-y-sm"},w={class:"row justify-center"},f={class:"row justify-center"},v={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},g={class:"row q-col-gutter-x-lg"},h={class:"col-md-6"},b={class:"col-md-6"},U={class:"row justify-end"},y={class:"row items-center justify-center q-col-gutter-x-md"},W={class:"col-6"},V={class:"col-6 column q-col-gutter-y-sm"},k={class:"row justify-center"},q={class:"row justify-center"};function P(e,l,n,P,D,O){const C=(0,t.up)("q-field"),x=(0,t.up)("q-btn"),Z=(0,t.up)("q-date"),Q=(0,t.up)("q-popup-proxy"),I=(0,t.up)("q-item-label"),H=(0,t.up)("q-item"),F=(0,t.up)("q-item-section"),j=(0,t.up)("q-select"),z=(0,t.up)("q-separator"),R=(0,t.up)("q-input"),S=(0,t.up)("q-list"),N=(0,t.up)("q-spinner-ios"),L=(0,t.up)("q-inner-loading"),M=(0,t.up)("q-form"),$=(0,t.up)("q-page"),Y=(0,t.up)("q-toolbar-title"),A=(0,t.up)("q-toolbar"),T=(0,t.up)("q-card"),E=(0,t.up)("q-dialog"),K=(0,t.Q2)("close-popup"),B=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)($,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{ref:"editPurchaseForm",onSubmit:e.submitPurchaseData},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(C,{"stack-label":"",label:"Item"},{control:(0,t.w5)((()=>[(0,t._)("div",null,(0,a.zw)(e.pageData.item.name?e.pageData.item.name:"Not available"),1)])),_:1}),(0,t.Wm)(C,{outlined:"",modelValue:e.formData.date,"onUpdate:modelValue":l[2]||(l[2]=l=>e.formData.date=l),"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},{control:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.formData.date),1)])),append:(0,t.w5)((()=>[(0,t.Wm)(x,{round:"",color:"primary",icon:"event"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{ref:"dateDialog"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{modelValue:e.formData.date,"onUpdate:modelValue":[l[0]||(l[0]=l=>e.formData.date=l),l[1]||(l[1]=l=>e.$refs.dateDialog.hide())],mask:"DD/MM/YYYY"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.wy)((0,t.Wm)(x,{label:"Close",color:"primary",flat:""},null,512),[[K]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(j,{"emit-value":"","map-options":"","use-input":"","fill-input":"","hide-selected":"",label:"Purchase",loading:e.loadingPurchaseOrders,options:e.filteredPurchaseOrderOptions,onFilter:e.filterPurchaseOrderOptions,"input-debounce":"0","option-label":e=>e.id?"PO # "+e.id:"","option-value":"id",modelValue:e.formData.purchase_order_id,"onUpdate:modelValue":l[3]||(l[3]=l=>e.formData.purchase_order_id=l),"lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.filteredPurchaseOrderOptions.map((e=>e.id)))},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"text-grey"},{default:(0,t.w5)((()=>[(0,t.Uk)("No results")])),_:1})])),_:1})])),option:(0,t.w5)((e=>[(0,t.Wm)(H,(0,a.vs)((0,t.F4)(e.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Uk)("PO # "+(0,a.zw)(e.opt.id),1)])),_:2},1024)])),_:2},1040)])),_:1},8,["loading","options","onFilter","option-label","modelValue","rules"]),(0,t._)("div",i,[(0,t._)("div",r,[(0,t.Wm)(C,{"stack-label":"",label:"Units"},{control:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.formData.units),1)])),_:1})]),(0,t._)("div",d,[(0,t.Wm)(C,{"stack-label":"",label:"Amount"},{control:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.formatPrice(e.formData.amount)),1)])),_:1})])]),(0,t._)("div",null,[(0,t._)("div",m,[e.permissionRequired("store","change_incomingstock")?((0,t.wg)(),(0,t.j4)(x,{key:0,unelevated:"","no-caps":"",label:"Add Purchases",color:"primary",onClick:l[4]||(l[4]=l=>e.newPurchaseUnitsDialog=!e.newPurchaseUnitsDialog)})):(0,t.kq)("",!0)]),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Unit")])),_:1})])),_:1}),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Quantity")])),_:1})])),_:1}),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Unit Price")])),_:1})])),_:1})])),_:1}),(0,t.Wm)(z),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.formData.units_details,((n,o)=>((0,t.wg)(),(0,t.j4)(H,{key:o},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{control:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(n.unit),1)])),append:(0,t.w5)((()=>[e.permissionRequired("store","change_incomingstock")?((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(x,{flat:"",dense:"","no-caps":"",label:"Update Units",icon:"arrow_drop_down",color:"primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"q-pt-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{outlined:"",clearable:"",label:"Enter search",modelValue:e.filter,"onUpdate:modelValue":[l[5]||(l[5]=l=>e.filter=l),e.filterUnitsOptions]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.Wm)(S,{dense:"",class:"q-mx-lg q-mb-lg"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.unitsFilterOptions,((l,o)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(H,{clickable:"",key:o,onClick:t=>e.updatePurchaseUnit(n.id,l.name)},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(l.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[B]]))),128)),0==e.unitsFilterOptions.length?((0,t.wg)(),(0,t.j4)(H,{key:0},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"text-grey"},{default:(0,t.w5)((()=>[(0,t.Uk)("No results")])),_:1})])),_:1})):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",p,[(0,t.Wm)(R,{dense:"",outlined:"",type:"number",modelValue:n.whole_number,"onUpdate:modelValue":e=>n.whole_number=e,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",_,[(0,t._)("div",w,[(0,t.Wm)(R,{dense:"",outlined:"",type:"number",modelValue:n.numerator,"onUpdate:modelValue":e=>n.numerator=e,modelModifiers:{number:!0},class:"col-10"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",null,[(0,t.Wm)(z,{class:"bg-grey-8"})]),(0,t._)("div",f,[(0,t.Wm)(R,{dense:"",outlined:"",type:"number",modelValue:n.denomenator,"onUpdate:modelValue":e=>n.denomenator=e,modelModifiers:{number:!0},class:"col-10"},null,8,["modelValue","onUpdate:modelValue"])])])])])),_:2},1024),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(R,{outlined:"",modelValue:n.unit_price,"onUpdate:modelValue":e=>n.unit_price=e,modelModifiers:{number:!0},type:"number","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[e.permissionRequired("store","change_incomingstock")?((0,t.wg)(),(0,t.j4)(x,{key:0,unelevated:"",round:"",color:"red",icon:"delete",size:"sm",onClick:l=>e.deletePurchaseUnit(n.id)},null,8,["onClick"])):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,t._)("div",null,[e.permissionRequired("store","change_incomingstock")?((0,t.wg)(),(0,t.j4)(x,{key:0,rounded:"",color:"primary",label:"Update",class:"full-width",type:"submit"})):(0,t.kq)("",!0)])]),(0,t.Wm)(L,{showing:e.loadingData},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1},8,["onSubmit"])])),_:1}),(0,t.Wm)(E,{persistent:"",modelValue:e.newPurchaseUnitsDialog,"onUpdate:modelValue":l[8]||(l[8]=l=>e.newPurchaseUnitsDialog=l)},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{style:{width:"650px",maxWidth:"650px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{ref:"newPurchaseUnitsForm",onSubmit:e.submitNewPurchaseUnits},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Add Purchase Units")])),_:1}),(0,t.wy)((0,t.Wm)(x,{flat:"",round:"",size:"md",icon:"close",onClick:e.clearPurchaseForm},null,8,["onClick"]),[[K]])])),_:1}),(0,t.Wm)(z),(0,t._)("div",v,[(0,t._)("div",g,[(0,t._)("div",h,[(0,t.Wm)(R,{readonly:"",modelValue:e.newPurchaseUnits.units,"onUpdate:modelValue":l[6]||(l[6]=l=>e.newPurchaseUnits.units=l),label:"Units",type:"number"},null,8,["modelValue"])]),(0,t._)("div",b,[(0,t.Wm)(R,{readonly:"",modelValue:e.newPurchaseUnits.amount,"onUpdate:modelValue":l[7]||(l[7]=l=>e.newPurchaseUnits.amount=l),label:"Amount",type:"number"},null,8,["modelValue"])])]),(0,t._)("div",null,[(0,t._)("div",U,[(0,t.Wm)(x,{unelevated:"",label:"Add",color:"primary",onClick:e.addUnit},null,8,["onClick"])]),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Unit")])),_:1})])),_:1}),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Quantity")])),_:1})])),_:1}),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Unit Price")])),_:1})])),_:1})])),_:1}),(0,t.Wm)(z),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.newPurchaseUnits.units_details,((l,n)=>((0,t.wg)(),(0,t.j4)(H,{key:n},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(j,{"map-options":"","emit-value":"","use-input":"","fill-input":"","hide-selected":"",outlined:"",modelValue:l.unit,"onUpdate:modelValue":e=>l.unit=e,loading:e.loadingUnits,options:e.unitsFilterOptions,"input-debounce":"0",onFilter:e.filterUnitsOptions1,"option-label":"name","option-value":"name","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.unitsFilterOptions.map((e=>e.name)))},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"text-grey"},{default:(0,t.w5)((()=>[(0,t.Uk)("No results")])),_:1})])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","loading","options","onFilter","rules"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t._)("div",y,[(0,t._)("div",W,[(0,t.Wm)(R,{dense:"",outlined:"",type:"number",modelValue:l.whole_number,"onUpdate:modelValue":e=>l.whole_number=e,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",V,[(0,t._)("div",k,[(0,t.Wm)(R,{dense:"",outlined:"",type:"number",modelValue:l.numerator,"onUpdate:modelValue":e=>l.numerator=e,modelModifiers:{number:!0},class:"col-10"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",null,[(0,t.Wm)(z,{class:"bg-grey-8"})]),(0,t._)("div",q,[(0,t.Wm)(R,{dense:"",outlined:"",type:"number",modelValue:l.denomenator,"onUpdate:modelValue":e=>l.denomenator=e,modelModifiers:{number:!0},class:"col-10"},null,8,["modelValue","onUpdate:modelValue"])])])])])),_:2},1024),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(R,{outlined:"",modelValue:l.unit_price,"onUpdate:modelValue":e=>l.unit_price=e,modelModifiers:{number:!0},type:"number","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{unelevated:"",round:"",color:"red",icon:"delete",size:"sm",onClick:l=>e.deleteUnit(n)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,t._)("div",null,[(0,t.Wm)(x,{rounded:"",loading:e.submittingData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}n(9665);var D=n(9302),O=n(499),C=n(4019),x=n(8221);const Z=(0,t.aZ)({name:"StoreIncomingDetails",props:["id"],setup(e){const l=(0,D.Z)(),n={units_details:[],item:{}},a=(0,O.iH)(!1),o=(0,O.iH)({...n}),u=(0,O.iH)({...n}),i=(0,O.iH)(),r=(0,O.iH)(!1),d=(0,O.iH)([]),m=(0,O.iH)([]),s=(0,O.iH)([]),c=(0,O.iH)([]),p=(0,O.iH)(!1),_=(0,O.iH)(""),w=(0,O.iH)(null),f=(0,O.iH)(!1),v=(0,O.iH)({...n}),g=(0,O.iH)(!1);function h(){return a.value=!0,o.value={...n},u.value={...n},(0,C.getStoreIncoming)(`/${e.id}`).then((e=>{o.value=e.data,u.value={purchase_order_id:o.value.purchase_order_id,date:o.value.date,units_details:o.value.units_details.map((e=>{let l={id:e.id,unit:e.unit,unit_price:e.unit_price},n=e.quantity.split("(");if(n.length>=1&&(l["whole_number"]=""==n[0]?null:parseInt(n[0])),2==n.length){let e=n[1].split("/");l["numerator"]=parseInt(e[0]),l["denomenator"]=parseInt(e[1].split(")")[0])}return l}))}})).finally((()=>{a.value=!1}))}function b(){return r.value=!0,(0,C.getUnits)().then((e=>{d.value=e.data,m.value=e.data})).finally((()=>{r.value=!1}))}function U(){p.value=!0,(0,C.getPurchaseOrder)().then((e=>{s.value=e.data,c.value=e.data})).finally((()=>{p.value=!1}))}return(0,t.bv)((()=>{h().then((()=>{b().then((()=>{U()}))}))})),(0,t.m0)((()=>{u.value.units_details&&(u.value.amount=u.value.units_details.reduce(((e,l)=>{let n=0;return l.whole_number&&l.whole_number>0&&(n=l.whole_number),l.denomenator&&l.denomenator>0&&l.numerator&&l.numerator>0?n=(l.denomenator*n+l.numerator)/l.denomenator:l.denomenator&&l.denomenator>0&&(null==l.numerator||0==l.numerator)&&(n=l.denomenator*n/l.denomenator),e+l.unit_price*n}),0),u.value.units=u.value.units_details.reduce(((e,l)=>{let n=0;return l.whole_number&&l.whole_number>0&&(n=l.whole_number),l.denomenator&&l.denomenator>0&&l.numerator&&l.numerator>0?n=(l.denomenator*n+l.numerator)/l.denomenator:l.denomenator&&l.denomenator>0&&(null==l.numerator||0==l.numerator)&&(n=l.denomenator*n/l.denomenator),e+n}),0)),v.value.units_details&&(v.value.amount=v.value.units_details.reduce(((e,l)=>{let n=0;return l.whole_number&&l.whole_number>0&&(n=l.whole_number),l.denomenator&&l.denomenator>0&&l.numerator&&l.numerator>0?n=(l.denomenator*n+l.numerator)/l.denomenator:l.denomenator&&l.denomenator>0&&(null==l.numerator||0==l.numerator)&&(n=l.denomenator*n/l.denomenator),e+l.unit_price*n}),0),v.value.units=v.value.units_details.reduce(((e,l)=>{let n=0;return l.whole_number&&l.whole_number>0&&(n=l.whole_number),l.denomenator&&l.denomenator>0&&l.numerator&&l.numerator>0?n=(l.denomenator*n+l.numerator)/l.denomenator:l.denomenator&&l.denomenator>0&&(null==l.numerator||0==l.numerator)&&(n=l.denomenator*n/l.denomenator),e+n}),0))})),{pageData:o,loadingData:a,formData:u,editPurchaseForm:i,loadingUnits:r,unitsOptions:d,unitsFilterOptions:m,filter:_,submittingData:g,newPurchaseUnitsDialog:f,newPurchaseUnitsForm:w,newPurchaseUnits:v,filteredPurchaseOrderOptions:c,loadingPurchaseOrders:p,clearPurchaseForm(){v.value={...n}},addUnit(){v.value.units_details.push({unit:null,unit_price:null,quantity:null})},deleteUnit(e){l.dialog({title:"Confirm",message:"Are you sure?",cancel:!0}).onOk((()=>{v.value.units_details.splice(e,1)}))},filterPurchaseOrderOptions(e,l){l((()=>{c.value=""==e||null==e?s.value:s.value.filter((l=>String(l.id).indexOf(e)>-1))}))},filterUnitsOptions(e){m.value=null!=e&&""!=e?d.value.filter((l=>l.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1)):d.value},filterUnitsOptions1(e,l){l((()=>{m.value=d.value.filter((l=>l.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1))}))},submitPurchaseData(){i.value.validate()&&l.dialog({title:"Confirm",message:"Please confirm.",cancel:!0}).onOk((()=>{a.value=!0;let l=[];u.value.units_details.forEach((e=>{let n=0;e.whole_number&&e.whole_number>0&&(n=e.whole_number),e.denomenator&&e.denomenator>0&&e.numerator&&e.numerator>0?n=`${e.denomenator*n+e.numerator}/${e.denomenator}`:e.denomenator&&e.denomenator>0&&(null==e.numerator||0==e.numerator)&&(n=`${e.denomenator*n}/${e.denomenator}`),l.push({unit:e.unit,unit_price:e.unit_price,quantity:n})})),(0,C.editStoreIncoming)(e.id,{...u.value,units_details:l}).then((e=>{(0,x.displayNotification)(e.data,"positive"),i.value.resetValidation(),h()})).catch((e=>{(0,x.displayNotification)(e.response.data,"negative")})).finally((()=>{a.value=!1}))}))},updatePurchaseUnit(e,n){l.dialog({title:"Confirm",message:"Please confirm.",cancel:!0}).onOk((()=>{a.value=!0,(0,C.updateStoreIncomingUnits)(e,{unit:n}).then((e=>{(0,x.displayNotification)(e.data,"positive"),h()})).catch((e=>{(0,x.displayNotification)(e.response.data,"negative")})).finally((()=>{a.value=!1}))}))},deletePurchaseUnit(e){l.dialog({title:"Confirm",message:"Please confirm.",cancel:!0}).onOk((()=>{a.value=!0,(0,C.deleteStoreIncomingUnits)(e).then((e=>{(0,x.displayNotification)(e.data,"positive"),h()})).catch((e=>{(0,x.displayNotification)(e.response.data,"negative")})).finally((()=>{a.value=!1}))}))},submitNewPurchaseUnits(){w.value.validate()&&l.dialog({title:"Confirm",message:"Please confirm.",cancel:!0}).onOk((()=>{g.value=!0;let l=[];v.value.units_details.forEach((e=>{let n=0;e.whole_number&&e.whole_number>0&&(n=e.whole_number),e.denomenator&&e.denomenator>0&&e.numerator&&e.numerator>0?n=`${e.denomenator*n+e.numerator}/${e.denomenator}`:e.denomenator&&e.denomenator>0&&(null==e.numerator||0==e.numerator)&&(n=`${e.denomenator*n}/${e.denomenator}`),l.push({unit:e.unit,unit_price:e.unit_price,quantity:n})})),(0,C.addStoreIncomingUnits)(e.id,l).then((e=>{(0,x.displayNotification)(e.data,"positive"),w.value.resetValidation(),f.value=!1,h()})).catch((e=>{(0,x.displayNotification)(e.response.data,"negative")})).finally((()=>{g.value=!1}))}))}}}});var Q=n(1639),I=n(9885),H=n(8326),F=n(8149),j=n(8879),z=n(2765),R=n(4351),S=n(4581),N=n(490),L=n(3115),M=n(1233),$=n(3246),Y=n(926),A=n(6611),T=n(854),E=n(8359),K=n(2074),B=n(4458),G=n(1663),J=n(1973),X=n(2146),ee=n(1136),le=n(9984),ne=n.n(le);const te=(0,Q.Z)(Z,[["render",P]]),ae=te;ne()(Z,"components",{QPage:I.Z,QForm:H.Z,QField:F.Z,QBtn:j.Z,QPopupProxy:z.Z,QDate:R.Z,QSelect:S.Z,QItem:N.Z,QItemLabel:L.Z,QItemSection:M.Z,QList:$.Z,QSeparator:Y.Z,QInput:A.Z,QInnerLoading:T.Z,QSpinnerIos:E.Z,QDialog:K.Z,QCard:B.Z,QToolbar:G.Z,QToolbarTitle:J.Z}),ne()(Z,"directives",{ClosePopup:X.Z,Ripple:ee.Z})}}]);