"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[3396],{3396:(e,l,a)=>{a.r(l),a.d(l,{default:()=>U});var t=a(9835);const d={class:"row justify-end"},o={class:"row no-wrap q-gutter-x-md"},i={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},n={class:"q-mt-sm row justify-between items-center"},u=(0,t._)("div",null,"Additional fields to capture",-1),s={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},m={class:"q-mt-sm row justify-between items-center"},r=(0,t._)("div",null,"Additional fields to capture",-1);function c(e,l,a,c,p,f){const g=(0,t.up)("q-btn"),y=(0,t.up)("q-td"),v=(0,t.up)("q-table"),h=(0,t.up)("q-page"),w=(0,t.up)("q-toolbar-title"),b=(0,t.up)("q-toolbar"),_=(0,t.up)("q-input"),q=(0,t.up)("q-item-label"),W=(0,t.up)("q-item-section"),D=(0,t.up)("q-item"),k=(0,t.up)("q-list"),C=(0,t.up)("q-form"),M=(0,t.up)("q-card"),P=(0,t.up)("q-dialog"),V=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(h,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[e.permissionRequired("core","add_paymentmethods")?((0,t.wg)(),(0,t.j4)(g,{key:0,rounded:"",color:"primary",label:"Create",onClick:l[0]||(l[0]=l=>e.createDialog=!e.createDialog)})):(0,t.kq)("",!0)]),(0,t.Wm)(v,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Payment Methods","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No methods available","loading-label":"Loading methods..."},{"body-cell-actions":(0,t.w5)((l=>[(0,t.Wm)(y,{props:l},{default:(0,t.w5)((()=>[(0,t._)("div",o,[e.permissionRequired("core","change_paymentmethods")?((0,t.wg)(),(0,t.j4)(g,{key:0,round:"",unelevated:"",size:"sm",icon:"edit",color:"primary",onClick:a=>e.selectEditPaymentMethod(l.rowIndex)},null,8,["onClick"])):(0,t.kq)("",!0),e.permissionRequired("core","delete_paymentmethods")?((0,t.wg)(),(0,t.j4)(g,{key:1,round:"",unelevated:"",size:"sm",icon:"delete",color:"red",loading:e.deletingItem,onClick:a=>e.deleteSelectedPaymentMethod(l.row.id)},null,8,["loading","onClick"])):(0,t.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,t.Wm)(P,{modelValue:e.createDialog,"onUpdate:modelValue":l[2]||(l[2]=l=>e.createDialog=l)},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{ref:"createDialogForm",onSubmit:e.submitMethodData},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Create Payment Method")])),_:1}),(0,t.wy)((0,t.Wm)(g,{flat:"",round:"",size:"md",icon:"close"},null,512),[[V]])])),_:1}),(0,t._)("div",i,[(0,t.Wm)(_,{modelValue:e.paymentMethodData.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.paymentMethodData.name=l),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",n,[u,(0,t.Wm)(g,{rounded:"","no-caps":"",dense:"",color:"primary",label:"Add",class:"q-px-md",onClick:e.addField},null,8,["onClick"])]),(0,t.Wm)(k,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.fields,((l,a)=>((0,t.wg)(),(0,t.j4)(D,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{dense:"",outlined:"",modelValue:l.field,"onUpdate:modelValue":e=>l.field=e,"lazy-rules":"ondemand",rules:[...e.textInputRequiredRules(),a=>1==e.fields.filter((e=>e.field.trim().toLocaleLowerCase()==l.field.trim().toLocaleLowerCase())).length||"Field names have to be unique"]},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(W,{side:""},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(g,{flat:"",round:"",color:"red",icon:"delete",onClick:l=>e.removeField(a)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,t._)("div",null,[(0,t.Wm)(g,{rounded:"",loading:e.submittedPaymentMethodData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(P,{modelValue:e.updateDialog,"onUpdate:modelValue":l[4]||(l[4]=l=>e.updateDialog=l)},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{ref:"updateDialogForm",onSubmit:e.submitEditedMethodData},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Edit Payment Method")])),_:1}),(0,t.wy)((0,t.Wm)(g,{flat:"",round:"",size:"md",icon:"close"},null,512),[[V]])])),_:1}),(0,t._)("div",s,[(0,t.Wm)(_,{modelValue:e.editPaymentMethodData.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.editPaymentMethodData.name=l),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",m,[r,(0,t.Wm)(g,{rounded:"","no-caps":"",dense:"",color:"primary",label:"Add",class:"q-px-md",onClick:e.addField1},null,8,["onClick"])]),(0,t.Wm)(k,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.editFields,((l,a)=>((0,t.wg)(),(0,t.j4)(D,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{dense:"",outlined:"",modelValue:l.field,"onUpdate:modelValue":e=>l.field=e,"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(W,{side:""},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(g,{flat:"",round:"",color:"red",icon:"delete",onClick:l=>e.removeField1(a)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,t._)("div",null,[(0,t.Wm)(g,{rounded:"",loading:e.submittedPaymentMethodData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}a(9665);var p=a(9302),f=a(499),g=a(4019);const y=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],v=(0,t.aZ)({name:"PaymentMethods",setup(){const e=(0,p.Z)(),l=(0,f.iH)([]),a=(0,f.iH)(!1),d=(0,f.iH)(!1),o=(0,f.iH)(null),i=(0,f.iH)(!1),n=(0,f.iH)({other_details:{}}),u=(0,f.iH)([]),s=(0,f.iH)(!1),m=(0,f.iH)(!1),r=(0,f.iH)({}),c=(0,f.iH)([]),v=(0,f.iH)(!1);function h(){a.value=!0,(0,g.getPaymentMethods)().then((e=>{l.value=e.data})).catch((e=>{})).finally((()=>{a.value=!1}))}return(0,t.bv)((()=>{h()})),{loadingData:a,tableRows:l,tableColumns:y,paymentMethodData:n,fields:u,createDialog:d,createDialogForm:o,submittedPaymentMethodData:i,updateDialog:s,updateDialogForm:m,editPaymentMethodData:r,editFields:c,deletingItem:v,selectEditPaymentMethod(e){r.value={...l.value[e]},c.value=r.value.other_details.fields?r.value.other_details.fields.map((e=>({field:e}))):[],s.value=!0},addField(){u.value.push({field:""})},removeField(e){u.value.splice(e,1)},addField1(){c.value.push({field:""})},removeField1(e){c.value.splice(e,1)},submitMethodData(){o.value.validate()&&(i.value=!0,u.value.length>0&&(n.value["other_details"]={fields:u.value.map((e=>e.field))}),(0,g.createPaymentMethod)({...n.value}).then((l=>{e.notify({type:"positive",message:l.data}),n.value={},h(),d.value=!1,o.value.resetValidation()})).catch((l=>{e.notify({type:"negative",message:l.response.data.length<1e3?l.response.data:"Server error please contact system administrator"})})).finally((()=>{i.value=!1})))},submitEditedMethodData(){if(m.value.validate()){i.value=!0,c.value.length>0&&(r.value["other_details"]={fields:c.value.map((e=>e.field))});let l=r.value.id;delete r.value.id,(0,g.editPaymentMethod)(l,{...r.value}).then((l=>{e.notify({type:"positive",message:l.data}),r.value={},h(),s.value=!1,m.value.resetValidation()})).catch((l=>{e.notify({type:"negative",message:l.response.data.length<1e3?l.response.data:"Server error please contact system administrator"})})).finally((()=>{i.value=!1}))}},deleteSelectedPaymentMethod(l){e.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{v.value=!0,(0,g.deletePaymentMethod)(l).then((l=>{e.notify({type:"positive",message:l.data}),h()})).catch((l=>{e.notify({type:"negative",message:l.response.data.length<1e3?l.response.data:"Server error please contact system administrator"})})).finally((()=>{v.value=!1}))}))}}}});var h=a(1639),w=a(9885),b=a(8879),_=a(7355),q=a(7220),W=a(2074),D=a(4458),k=a(8326),C=a(1663),M=a(1973),P=a(6611),V=a(3246),Z=a(490),x=a(1233),F=a(3115),H=a(2146),Q=a(9984),R=a.n(Q);const I=(0,h.Z)(v,[["render",c]]),U=I;R()(v,"components",{QPage:w.Z,QBtn:b.Z,QTable:_.Z,QTd:q.Z,QDialog:W.Z,QCard:D.Z,QForm:k.Z,QToolbar:C.Z,QToolbarTitle:M.Z,QInput:P.Z,QList:V.Z,QItem:Z.Z,QItemSection:x.Z,QItemLabel:F.Z}),R()(v,"directives",{ClosePopup:H.Z})}}]);