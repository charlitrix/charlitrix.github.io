"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[2748],{2748:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var t=l(9835);const n={class:"row q-gutter-x-md"},o={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"};function i(e,a,l,i,s,r){const u=(0,t.up)("q-btn"),d=(0,t.up)("q-td"),m=(0,t.up)("q-table"),p=(0,t.up)("q-page"),c=(0,t.up)("q-toolbar-title"),g=(0,t.up)("q-toolbar"),b=(0,t.up)("q-separator"),f=(0,t.up)("q-input"),v=(0,t.up)("q-form"),w=(0,t.up)("q-card"),h=(0,t.up)("q-dialog"),x=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(p,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Expenses Tracking","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No expenses available","loading-label":"Loading data..."},{"body-cell-actions":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t._)("div",n,[e.permissionRequired("otherservices","change_expensetrack")?((0,t.wg)(),(0,t.j4)(u,{key:0,round:"",unelevated:"",size:"sm",color:"primary",icon:"edit",loading:e.submittedData,onClick:l=>e.showEditExpenseDialog(a.row.id)},null,8,["loading","onClick"])):(0,t.kq)("",!0),e.permissionRequired("otherservices","delete_expensetrack")?((0,t.wg)(),(0,t.j4)(u,{key:1,round:"",unelevated:"",size:"sm",color:"red",icon:"delete",loading:e.submittedData,onClick:l=>e.showDeleteExpenseDialog(a.row.id)},null,8,["loading","onClick"])):(0,t.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,t.Wm)(h,{modelValue:e.editExpenseDialog,"onUpdate:modelValue":a[1]||(a[1]=a=>e.editExpenseDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{ref:"editExpenseDialogForm",onSubmit:e.submitExpenseData},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Edit Expense")])),_:1}),(0,t.wy)((0,t.Wm)(u,{flat:"",round:"",size:"md",icon:"close"},null,512),[[x]])])),_:1}),(0,t.Wm)(b),(0,t._)("div",o,[(0,t.Wm)(f,{modelValue:e.expenseData.amount,"onUpdate:modelValue":a[0]||(a[0]=a=>e.expenseData.amount=a),modelModifiers:{number:!0},type:"number",label:"Amount","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(u,{rounded:"","no-caps":"",loading:e.submittedData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var s=l(9302),r=l(499),u=l(4019),d=l(8221);const m=[{name:"id",label:"#",sortable:!0,field:"id",align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"amount",label:"Amount",field:e=>(0,d.formatPrice)(e.amount),sortable:!0,align:"left"},{name:"amount",label:"Total Amount",field:e=>(0,d.formatPrice)(e.cumulated_amount),sortable:!0,align:"left"},{name:"date",label:"Date",field:"created",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],p=(0,t.aZ)({name:"ExpensesTracks",setup(){const e=(0,s.Z)(),a=(0,r.iH)([]),l=(0,r.iH)(!1),n=(0,r.iH)(!1),o=(0,r.iH)(!1),i=(0,r.iH)(null),d=(0,r.iH)({});function p(){l.value=!0,(0,u.getOtherServicesExpenseTracking)().then((e=>{a.value=e.data})).catch((e=>{})).finally((()=>{l.value=!1}))}return(0,t.bv)((()=>{p()})),{loadingData:l,tableRows:a,tableColumns:m,submittedData:n,expenseData:d,editExpenseDialog:o,editExpenseDialogForm:i,showEditExpenseDialog(e){let l=a.value.find((a=>a.id==e));d.value={id:l.id,amount:l.amount},o.value=!0},submitExpenseData(){i.value.validate()&&(n.value=!0,(0,u.editOtherServicesExpenseTracking)(d.value.id,{amount:d.value.amount}).then((a=>{e.notify({type:"positive",message:a.data}),d.value={},p(),o.value=!1,i.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1})))},showDeleteExpenseDialog(a){e.dialog({title:"Confirm",message:"Confirm delete of the transaction.",cancel:!0}).onOk((()=>{(0,u.deleteOtherServicesExpenseTracking)(a).then((a=>{e.notify({type:"positive",message:a.data}),p()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{submittedPurchaseData.value=!1}))}))}}}});var c=l(1639),g=l(9885),b=l(7355),f=l(7220),v=l(8879),w=l(2074),h=l(4458),x=l(8326),y=l(1663),D=l(1973),k=l(926),q=l(6611),E=l(2146),Z=l(9984),_=l.n(Z);const T=(0,c.Z)(p,[["render",i]]),C=T;_()(p,"components",{QPage:g.Z,QTable:b.Z,QTd:f.Z,QBtn:v.Z,QDialog:w.Z,QCard:h.Z,QForm:x.Z,QToolbar:y.Z,QToolbarTitle:D.Z,QSeparator:k.Z,QInput:q.Z}),_()(p,"directives",{ClosePopup:E.Z})}}]);