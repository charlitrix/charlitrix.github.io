"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[4696],{4696:(e,t,l)=>{l.r(t),l.d(t,{default:()=>N});var a=l(9835),i=l(6970);const n={class:"row q-col-gutter-md"},o={class:"column justify-center"},d=(0,a._)("div",null,null,-1),u={class:"row q-gutter-x-md"},s={class:"q-pa-lg"},r={class:"row items-center justify-center q-col-gutter-x-md"},m={class:"col-6"},c={class:"col-6 column q-col-gutter-y-sm"},p={class:"row justify-center"},b={class:"row justify-center"};function g(e,t,l,g,v,f){const w=(0,a.up)("q-td"),_=(0,a.up)("q-btn"),k=(0,a.up)("q-table"),h=(0,a.up)("q-page"),y=(0,a.up)("q-toolbar-title"),q=(0,a.up)("q-toolbar"),D=(0,a.up)("q-separator"),W=(0,a.up)("q-input"),S=(0,a.up)("q-item-section"),Z=(0,a.up)("q-item-label"),Q=(0,a.up)("q-item"),V=(0,a.up)("q-form"),C=(0,a.up)("q-card"),x=(0,a.up)("q-dialog"),I=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(h,{class:"q-ma-xl"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Stock Added","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No records available","loading-label":"Loading records..."},{"body-cell-units_available":(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",o,[(0,a._)("div",null,(0,i.zw)(e.value),1)]),d])])),_:2},1032,["props"])])),"body-cell-actions":(0,a.w5)((t=>[(0,a.Wm)(w,{props:t},{default:(0,a.w5)((()=>[(0,a._)("div",u,[e.permissionRequired("restaurant","change_stockaddedtracking")?((0,a.wg)(),(0,a.j4)(_,{key:0,round:"",unelevated:"",size:"sm",color:"primary",icon:"edit",onClick:l=>e.showEditStockDialog(t.rowIndex),loading:e.submittingData},null,8,["onClick","loading"])):(0,a.kq)("",!0),e.permissionRequired("restaurant","delete_stockaddedtracking")?((0,a.wg)(),(0,a.j4)(_,{key:1,round:"",unelevated:"",size:"sm",color:"red",icon:"delete",loading:e.submittingData,onClick:l=>e.showDeleteDialog(t.row.id)},null,8,["loading","onClick"])):(0,a.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,a.Wm)(x,{modelValue:e.editDialog,"onUpdate:modelValue":t[3]||(t[3]=t=>e.editDialog=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{style:{width:"600px",maxWidth:"600px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{ref:"editDialogForm",onSubmit:e.submitData},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Edit "+(0,i.zw)(e.editStock.item.name),1)])),_:1}),(0,a.wy)((0,a.Wm)(_,{flat:"",round:"",size:"md",icon:"close"},null,512),[[I]])])),_:1}),(0,a.Wm)(D),(0,a._)("div",s,[(0,a.Wm)(Q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",m,[(0,a.Wm)(W,{dense:"",outlined:"",type:"number",modelValue:e.editStock.unit.whole_number,"onUpdate:modelValue":t[0]||(t[0]=t=>e.editStock.unit.whole_number=t),modelModifiers:{number:!0}},null,8,["modelValue"])]),(0,a._)("div",c,[(0,a._)("div",p,[(0,a.Wm)(W,{dense:"",outlined:"",type:"number",modelValue:e.editStock.unit.numerator,"onUpdate:modelValue":t[1]||(t[1]=t=>e.editStock.unit.numerator=t),modelModifiers:{number:!0},class:"col-9"},null,8,["modelValue"])]),(0,a._)("div",null,[(0,a.Wm)(D,{class:"bg-grey-8"})]),(0,a._)("div",b,[(0,a.Wm)(W,{dense:"",outlined:"",type:"number",modelValue:e.editStock.unit.denomenator,"onUpdate:modelValue":t[2]||(t[2]=t=>e.editStock.unit.denomenator=t),modelModifiers:{number:!0},class:"col-9"},null,8,["modelValue"])])])])])),_:1}),(0,a.Wm)(S,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.editStock.unit.units),1)])),_:1})])),_:1})])),_:1}),(0,a._)("div",null,[(0,a.Wm)(_,{rounded:"",loading:e.submittingData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var v=l(9302),f=l(499),w=l(4019),_=l(8221);const k=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:e=>e.item.name,sortable:!0,align:"left"},{name:"units",label:"Units",field:e=>`${e.quantity} ${e.unit}`,sortable:!0,align:"left"},{name:"available",label:"Available",field:e=>`${e.available} ${e.unit}`,align:"left"},{name:"date",label:"Date",align:"left",field:"date_time"},{name:"actions",label:"Actions",align:"left"}],h=(0,a.aZ)({name:"RestaurantAddedIndex",setup(){const e=(0,v.Z)(),t=(0,f.iH)([]),l=(0,f.iH)(!1),i=(0,f.iH)(!1),n=(0,f.iH)(null),o=(0,a.Fl)((()=>n.value?[...n.value.units_available_details]:[])),d=(0,f.iH)(!1),u=(0,f.iH)(!1),s=(0,f.iH)({item:{},unit:{}});function r(){return l.value=!0,(0,w.getRestaurantAddedStock)().then((e=>{t.value=e.data})).catch((e=>{})).finally((()=>{l.value=!1}))}return(0,a.bv)((()=>{r()})),{loadingData:l,tableRows:t,tableColumns:k,item:n,itemDetails:o,submittingData:i,editStock:s,editDialog:d,editDialogForm:u,showEditStockDialog(e){let l={...t.value[e]};s.value.item=l.item;let a={id:l.id,units:l.unit},i=l.quantity.split("(");if(i.length>=1&&(a["whole_number"]=""==i[0]?null:parseInt(i[0])),2==i.length){let e=i[1].split("/");a["numerator"]=parseInt(e[0]),a["denomenator"]=parseInt(e[1].split(")")[0])}s.value.unit=a,d.value=!0},submitData(){if(u.value.validate()){i.value=!0;let e=s.value.unit,t=0;e.whole_number&&e.whole_number>0&&(t=e.whole_number),e.denomenator&&e.denomenator>0&&e.numerator&&e.numerator>0?t=`${e.denomenator*t+e.numerator}/${e.denomenator}`:e.denomenator&&e.denomenator>0&&(null==e.numerator||0==e.numerator)&&(t=`${e.denomenator*t}/${e.denomenator}`),(0,w.editRestaurantAddedStock)(s.value.item.id,{usage:{id:e.id,quantity:t}}).then((e=>{(0,_.displayNotification)(e.data,"positive"),s.value={item:{},unit:{}},r(),d.value=!1,u.value.resetValidation()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{i.value=!1}))}},showDeleteDialog(t){e.dialog({title:"Confirm",message:"Confirm deleting of this transaction?",cancel:!0}).onOk((()=>{i.value=!0,(0,w.deleteRestaurantAddedStock)(t).then((e=>{(0,_.displayNotification)(e.data,"positive"),r()})).catch((e=>{(0,_.displayNotification)(response.data,"negative")})).finally((()=>{i.value=!1}))}))}}}});var y=l(1639),q=l(9885),D=l(7355),W=l(7220),S=l(8879),Z=l(2074),Q=l(4458),V=l(8326),C=l(1663),x=l(1973),I=l(926),H=l(490),R=l(1233),U=l(6611),$=l(3115),A=l(2146),T=l(9984),j=l.n(T);const z=(0,y.Z)(h,[["render",g]]),N=z;j()(h,"components",{QPage:q.Z,QTable:D.Z,QTd:W.Z,QBtn:S.Z,QDialog:Z.Z,QCard:Q.Z,QForm:V.Z,QToolbar:C.Z,QToolbarTitle:x.Z,QSeparator:I.Z,QItem:H.Z,QItemSection:R.Z,QInput:U.Z,QItemLabel:$.Z}),j()(h,"directives",{ClosePopup:A.Z})}}]);