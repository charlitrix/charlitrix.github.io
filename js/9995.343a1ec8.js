"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[9995],{9995:(e,t,l)=>{l.r(t),l.d(t,{default:()=>z});l(6727);var a=l(9835),o=l(6970);const n={class:"row q-mb-lg justify-between"},s={class:"row q-gutter-x-xl"},i={class:"row items-center q-gutter-x-md"},u={key:0,class:"text-grey-9 q-ml-sm"},d={key:1,class:"text-grey-9 q-ml-sm"},r={class:"row justify-end"},c={key:0,class:"text-grey-9 q-ml-sm"},m={key:1,class:"text-grey-9 q-ml-sm"},p={class:"row justify-end"},k={key:0,class:"row items-center"},b={id:"reportToPrint"};function v(e,t,l,v,g,w){const f=(0,a.up)("q-select"),h=(0,a.up)("q-form"),D=(0,a.up)("q-btn"),_=(0,a.up)("q-date"),y=(0,a.up)("q-popup-proxy"),S=(0,a.up)("q-field"),q=(0,a.up)("q-separator"),W=(0,a.up)("q-td"),R=(0,a.up)("q-table"),C=(0,a.up)("q-spinner-ios"),U=(0,a.up)("q-inner-loading"),V=(0,a.up)("q-page"),O=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(V,{class:"q-pa-xl"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",s,[(0,a._)("div",null,[(0,a.Wm)(h,{ref:"stockItemForm"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{dense:"",outlined:"","emit-value":"","map-options":"","options-cover":"","option-label":"label","option-value":"value",modelValue:e.selectedStockOption,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.selectedStockOption=t),e.stockOptionChanged],options:e.stockOptions,"lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.stockValidOptions.map((e=>e.value))),style:{minWidth:"200px"}},null,8,["modelValue","onUpdate:modelValue","options","rules"])])),_:1},512)]),(0,a._)("div",null,[(0,a.Wm)(f,{dense:"",outlined:"","emit-value":"","map-options":"","options-cover":"","option-label":"label","option-value":"value",modelValue:e.selectedFilter,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.selectedFilter=t),e.filterOptionChanged],options:e.filterOptions},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,a._)("div",null,[(0,a._)("div",i,[(0,a.Wm)(S,{"stack-label":"",dense:"",borderless:""},{control:(0,a.w5)((()=>[(0,a.Uk)(" From: "),e.fromDate?((0,a.wg)(),(0,a.iD)("span",u,(0,o.zw)(e.fromDate),1)):((0,a.wg)(),(0,a.iD)("span",d,"Select date"))])),append:(0,a.w5)((()=>[(0,a.Wm)(D,{flat:"",dense:"",color:"primary",icon:"calendar_month"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{ref:"fromDateDialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:e.fromDate,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.fromDate=t),e.fromDateChanged],mask:"DD/MM/YYYY"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.wy)((0,a.Wm)(D,{flat:"",label:"Close",color:"primary"},null,512),[[O]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1},512)])),_:1})])),_:1}),(0,a.Wm)(S,{"stack-label":"",dense:"",borderless:""},{control:(0,a.w5)((()=>[(0,a.Uk)("To: "),e.toDate?((0,a.wg)(),(0,a.iD)("span",c,(0,o.zw)(e.toDate),1)):((0,a.wg)(),(0,a.iD)("span",m,"Select date"))])),append:(0,a.w5)((()=>[(0,a.Wm)(D,{flat:"",dense:"",color:"primary",icon:"calendar_month"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{ref:"toDateDialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:e.toDate,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.toDate=t),e.toDateChanged],mask:"DD/MM/YYYY"},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a.wy)((0,a.Wm)(D,{flat:"",label:"Close",color:"primary"},null,512),[[O]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1},512)])),_:1})])),_:1})])])]),e.$q.platform.is.electron?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(D,{unelevated:"",flat:"","no-caps":"",icon:"print",color:"primary",label:"Print",onClick:t[4]||(t[4]=t=>e.printDocument("reportToPrint",e.printingSettings))}),(0,a.Wm)(q,{vertical:""}),(0,a.Wm)(D,{unelevated:"",flat:"","no-caps":"",icon:"file_download",color:"grey-9",label:"Download",onClick:t[5]||(t[5]=t=>e.printDocumentPDF("reportToPrint"))})])):(0,a.kq)("",!0)]),(0,a._)("div",null,[(0,a._)("div",b,[e.table2StockOptions.includes(e.selectedStockOption)&&null!==e.selectedStockOption?((0,a.wg)(),(0,a.j4)(R,{key:1,flat:"",bordered:"",square:"","hide-pagination":"",loading:e.loadingData,columns:e.tableColumns2,rows:e.tableRows2,pagination:{rowsPerPage:0},title:"","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No stock available","loading-label":"Loading stock..."},{"body-cell-units":(0,a.w5)((e=>[(0,a.Wm)(W,{props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.quantity)+" "+(0,o.zw)(e.row.unit),1)])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])):((0,a.wg)(),(0,a.j4)(R,{key:0,flat:"",bordered:"",square:"","hide-pagination":"",loading:e.loadingData,columns:e.tableColumns1,rows:e.tableRows1,pagination:{rowsPerPage:0},title:"","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No stock available","loading-label":"Loading stock..."},{"body-cell-units":(0,a.w5)((e=>[(0,a.Wm)(W,{props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.quantity)+" "+(0,o.zw)(e.row.unit),1)])),_:2},1032,["props"])])),"body-cell-available":(0,a.w5)((e=>[(0,a.Wm)(W,{props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.available)+" "+(0,o.zw)(e.row.unit),1)])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"]))]),(0,a.Wm)(U,{label:"Please wait",showing:e.loadingData},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{size:"50px",color:"primary"})])),_:1},8,["showing"])])])),_:1})}var g=l(9302),w=l(499),f=l(4019);l(8221);const h=(0,a.aZ)({name:"ReportsIndex",setup(){(0,g.Z)();const e=(0,w.iH)(!1),t=(0,w.iH)(),l=(0,w.iH)(),o=(0,w.iH)("1"),n=(0,w.iH)("?month"),s=(0,w.iH)("month"),i=[{label:"Select Period",value:null,disable:!0},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}],u=(0,w.iH)(""),d=(0,w.iH)(""),r=(0,w.iH)(null),c=["kitchen-stock-unused","restaurant-stock-unsold","bar-stock-unsold","store-stock-unused"],m=[{label:"Kitchen Stock Used",value:"kitchen-stock-used"},{label:"Kitchen Stock Unused",value:"kitchen-stock-unused"},{label:"Restaurant Stock Added",value:"restaurant-stock-added"},{label:"Restaurant Stock Unsold",value:"restaurant-stock-unsold"},{label:"Bar Stock Unsold",value:"bar-stock-unsold"},{label:"Store Stock Unused",value:"store-stock-unused"},{label:"Store Stock out",value:"store-stock-out"}],p=[{label:"Select Item",value:null,disable:!0},...m],k=(0,w.iH)([]),b=(0,w.iH)([]),v=(0,w.iH)(null),h=(0,w.iH)({});function D(){n.value=`?from_date=${u.value}&to_date=${d.value}`,y(),s.value=null}function _(e){return"kitchen-stock-used"==e?(0,f.getKitchenReports)("/used-stock"+n.value):"kitchen-stock-unused"==e?(0,f.getKitchenReports)("/dead-stock"+n.value):"restaurant-stock-added"==e?(0,f.getRestaurantReports)("/added-stock"+n.value):"restaurant-stock-unsold"==e?(0,f.getRestaurantReports)("/dead-stock"+n.value):"bar-stock-unsold"==e?(0,f.getBarReports)("/dead-stock"+n.value):"store-stock-unused"==e?(0,f.getStoreReports)("/dead-stock"+n.value):"store-stock-out"==e?(0,f.getStoreReports)("/outgoing-stock"+n.value):new Promise(((e,t)=>{t()}))}function y(){v.value.validate().then((t=>{t&&(e.value=!0,k.value=[],b.value=[],_(r.value).then((e=>{c.includes(r.value)?b.value=e.data:k.value=e.data})).finally((()=>{e.value=!1})),v.value.resetValidation())}))}function S(){return(0,f.getGeneralSettings)("?name=PRINTERS").then((e=>{h.value=e.data.details["items"].find((e=>"rooms receipts"==e.item))||e.data.details["items"].find((e=>"receipts"==e.item))}))}return(0,a.bv)((()=>{S()})),{loadingData:e,toDateDialog:t,fromDateDialog:l,fromDate:u,toDate:d,tabs:o,selectedFilter:s,filterOptions:i,selectedStockOption:r,stockOptions:p,stockValidOptions:m,tableRows1:k,tableRows2:b,stockItemForm:v,table2StockOptions:c,printingSettings:h,tableColumns1:[{label:"Name",field:e=>e.stock_item?e.stock_item.name:e.item?e.item.name:"",align:"left",name:"name"},{label:"Units",align:"left",name:"units"},{label:"Available",align:"left",name:"available"},{label:"Date",align:"left",field:"date_time",name:"date"}],tableColumns2:[{label:"Name",field:e=>e.stock_item?e.stock_item.name:e.item?e.item.name:e.brand_item?e.brand_item.name:"",align:"left",name:"name"},{label:"units",align:"left",name:"units"},{label:"Reason",field:"description",align:"left",name:"reason"},{label:"Date",align:"left",field:"date_time",name:"date"}],fromDateChanged(e,t,a){null!=u.value&&null!=d.value&&D(),l.value.hide()},toDateChanged(e,l,a){null!=u.value&&null!=d.value&&D(),t.value.hide()},filterOptionChanged(e){e&&(u.value=null,d.value=null,n.value=`?filter=${e}`,y())},stockOptionChanged(){null===n.value&&""==n.value||y()}}}});var D=l(1639),_=l(9885),y=l(8326),S=l(4581),q=l(8149),W=l(8879),R=l(2765),C=l(4351),U=l(926),V=l(7355),O=l(7220),P=l(854),Z=l(8359),x=l(2146),H=l(9984),Q=l.n(H);const T=(0,D.Z)(h,[["render",v]]),z=T;Q()(h,"components",{QPage:_.Z,QForm:y.Z,QSelect:S.Z,QField:q.Z,QBtn:W.Z,QPopupProxy:R.Z,QDate:C.Z,QSeparator:U.Z,QTable:V.Z,QTd:O.Z,QInnerLoading:P.Z,QSpinnerIos:Z.Z}),Q()(h,"directives",{ClosePopup:x.Z})}}]);