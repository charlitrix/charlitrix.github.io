"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[7144],{7144:(e,a,l)=>{l.r(a),l.d(a,{default:()=>S});var t=l(9835);const o={class:"row justify-end"},i={class:"row no-wrap q-gutter-x-md"},n={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},r={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"};function u(e,a,l,u,s,d){const m=(0,t.up)("q-btn"),g=(0,t.up)("q-td"),c=(0,t.up)("q-table"),p=(0,t.up)("q-page"),y=(0,t.up)("q-toolbar-title"),v=(0,t.up)("q-toolbar"),b=(0,t.up)("q-separator"),w=(0,t.up)("q-input"),f=(0,t.up)("q-form"),D=(0,t.up)("q-card"),C=(0,t.up)("q-dialog"),q=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(p,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[e.permissionRequired("store","add_category")?((0,t.wg)(),(0,t.j4)(m,{key:0,rounded:"",color:"primary",label:"Create",onClick:a[0]||(a[0]=a=>e.createDialog=!e.createDialog)})):(0,t.kq)("",!0)]),(0,t.Wm)(c,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Categories","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No categories available","loading-label":"Loading categories..."},{"body-cell-actions":(0,t.w5)((a=>[(0,t.Wm)(g,{props:a},{default:(0,t.w5)((()=>[(0,t._)("div",i,[e.permissionRequired("store","change_category")?((0,t.wg)(),(0,t.j4)(m,{key:0,round:"",unelevated:"",size:"sm",icon:"edit",color:"primary",onClick:l=>e.selectEditCategory(a.rowIndex)},null,8,["onClick"])):(0,t.kq)("",!0),e.permissionRequired("store","delete_category")?((0,t.wg)(),(0,t.j4)(m,{key:1,round:"",unelevated:"",size:"sm",color:"red",icon:"delete",loading:e.submittingData,onClick:l=>e.showDeleteDialog(a.row.id)},null,8,["loading","onClick"])):(0,t.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,t.Wm)(C,{modelValue:e.createDialog,"onUpdate:modelValue":a[2]||(a[2]=a=>e.createDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{ref:"createDialogForm",onSubmit:e.submitCategoryData},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Create New Category")])),_:1}),(0,t.wy)((0,t.Wm)(m,{flat:"",round:"",size:"md",icon:"close"},null,512),[[q]])])),_:1}),(0,t.Wm)(b),(0,t._)("div",n,[(0,t.Wm)(w,{modelValue:e.categoryData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.categoryData.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(m,{rounded:"",loading:e.submittingData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(C,{modelValue:e.updateDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.updateDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{ref:"updateDialogForm",onSubmit:e.updateCategoryData},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Update Category")])),_:1}),(0,t.wy)((0,t.Wm)(m,{flat:"",round:"",size:"md",icon:"close"},null,512),[[q]])])),_:1}),(0,t.Wm)(b),(0,t._)("div",r,[(0,t.Wm)(w,{modelValue:e.selectedItem.newName,"onUpdate:modelValue":a[3]||(a[3]=a=>e.selectedItem.newName=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(m,{rounded:"",loading:e.submittingData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var s=l(9302),d=l(499),m=l(4019),g=l(8221);const c=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],p=(0,t.aZ)({name:"StoreCategories",setup(){const e=(0,s.Z)(),a=(0,d.iH)([]),l=(0,d.iH)(!1),o=(0,d.iH)(!1),i=(0,d.iH)(),n=(0,d.iH)(!1),r=(0,d.iH)({}),u=(0,d.iH)(!1),p=(0,d.iH)(null),y=(0,d.iH)({});function v(){l.value=!0,(0,m.getStoreCategories)().then((e=>{a.value=e.data})).catch((e=>{})).finally((()=>{l.value=!1}))}return(0,t.bv)((()=>{v()})),{loadingData:l,tableRows:a,tableColumns:c,categoryData:r,createDialog:o,createDialogForm:i,submittingData:n,updateDialog:u,updateDialogForm:p,selectedItem:y,selectEditCategory(e){y.value={...a.value[e]},y.value.newName=y.value.name,u.value=!0},submitCategoryData(){i.value.validate()&&(n.value=!0,(0,m.createStoreCategories)({...r.value}).then((a=>{e.notify({type:"positive",message:a.data}),r.value={},v(),o.value=!1,i.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1})))},updateCategoryData(){p.value.validate()&&(n.value=!0,(0,m.editStoreCategories)(y.value.id,{name:y.value.newName}).then((a=>{e.notify({type:"positive",message:a.data}),y.value={},v(),u.value=!1,p.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1})))},showDeleteDialog(a){e.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{n.value=!0,(0,m.deleteStoreCategories)(a).then((e=>{(0,g.displayNotification)(e.data,"positive")})).catch((e=>{(0,g.displayNotification)(e.response.data,"negative")})).finally((()=>{n.value=!1}))}))}}}});var y=l(1639),v=l(9885),b=l(8879),w=l(7355),f=l(7220),D=l(2074),C=l(4458),q=l(8326),h=l(1663),_=l(1973),W=l(926),k=l(6611),Z=l(2146),V=l(9984),x=l.n(V);const Q=(0,y.Z)(p,[["render",u]]),S=Q;x()(p,"components",{QPage:v.Z,QBtn:b.Z,QTable:w.Z,QTd:f.Z,QDialog:D.Z,QCard:C.Z,QForm:q.Z,QToolbar:h.Z,QToolbarTitle:_.Z,QSeparator:W.Z,QInput:k.Z}),x()(p,"directives",{ClosePopup:Z.Z})}}]);