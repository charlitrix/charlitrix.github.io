"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[5577],{5577:(a,e,l)=>{l.r(e),l.d(e,{default:()=>S});var t=l(9835),o=l(6970);const i={key:1},s=(0,t._)("br",null,null,-1),n={key:0,class:"text-red text-weight-bold"},r={class:"text-capitalize"};function u(a,e,l,u,d,m){const c=(0,t.up)("q-btn"),g=(0,t.up)("q-td"),p=(0,t.up)("q-table"),b=(0,t.up)("q-page"),f=(0,t.up)("q-toolbar-title"),w=(0,t.up)("q-toolbar"),_=(0,t.up)("q-input"),h=(0,t.up)("q-card-section"),k=(0,t.up)("q-card-actions"),v=(0,t.up)("q-form"),y=(0,t.up)("q-card"),W=(0,t.up)("q-dialog"),q=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(b,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{flat:"","wrap-cells":"",loading:a.loadingData,columns:a.tableColumns,rows:a.tableRows,pagination:{rowsPerPage:0},title:"Sales Logs","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No logs available","loading-label":"Loading logs..."},{"body-cell-logout_time":(0,t.w5)((e=>[(0,t.Wm)(g,{props:e},{default:(0,t.w5)((()=>[e.row.logout_date_time?((0,t.wg)(),(0,t.iD)("span",i,[(0,t.Uk)((0,o.zw)(e.row.formatted_logout)+" ",1),s,e.row.manager_item.id?((0,t.wg)(),(0,t.iD)("span",n,[(0,t.Uk)(" By "),(0,t._)("span",null,(0,o.zw)(e.row.manager_item.first_name+" "+e.row.manager_item.last_name),1),(0,t.Uk)(" ("+(0,o.zw)(e.row.manager_item.username)+") ",1)])):(0,t.kq)("",!0)])):((0,t.wg)(),(0,t.j4)(c,{key:0,dense:"","no-caps":"",rounded:"",color:"red-6",class:"q-px-md",label:"Logout",onClick:l=>a.showLogoutDialog(e.rowIndex)},null,8,["onClick"]))])),_:2},1032,["props"])])),"body-cell-id":(0,t.w5)((a=>[(0,t.Wm)(g,{props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.rowIndex+1),1)])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((a=>[(0,t.Wm)(g,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{round:"",unelevated:"",size:"sm",icon:"edit",color:"primary"})])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,t.Wm)(W,{modelValue:a.logoutDialog,"onUpdate:modelValue":e[1]||(e[1]=e=>a.logoutDialog=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{style:{minWidth:"500px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{ref:"logoutForm",onSubmit:a.submitUserLogout},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Sales Tracking ")])),_:1}),(0,t.wy)((0,t.Wm)(c,{round:"",flat:"",icon:"close"},null,512),[[q]])])),_:1}),(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t._)("p",null,[(0,t.Uk)(" Enter Cash made by "),(0,t._)("span",r,(0,o.zw)(a.trackData.name),1),(0,t.Uk)(" on "+(0,o.zw)(a.trackData.date),1)]),(0,t.Wm)(_,{modelValue:a.trackData.cash,"onUpdate:modelValue":e[0]||(e[0]=e=>a.trackData.cash=e),label:"Amount",type:"number","lazy-rules":"ondemand",rules:a.numberInputRequiredRules()},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{rounded:"",type:"submit",color:"primary",label:"submit",class:"full-width",loading:a.submitting},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var d=l(9302),m=l(499),c=l(4019),g=l(8221);const p=[{name:"id",label:"#",sortable:!0,align:"left"},{name:"username",label:"User",field:a=>a.user_item.username,sortable:!0,align:"left"},{name:"name",label:"Name",field:a=>a.user_item.first_name+" "+a.user_item.last_name,sortable:!0,align:"left"},{name:"login_time",label:"Logged In",field:a=>a.formatted_login,sortable:!0,align:"left"},{name:"logout_time",label:"Logged out",sortable:!0,align:"left"},{name:"cash_sales",label:"Cash Sales",field:a=>(0,g.formatPrice)(a.cash_sales),sortable:!0,align:"left"},{name:"credit_sales",label:"Credit Sales",field:a=>(0,g.formatPrice)(a.credit_sales),sortable:!0,align:"left"},{name:"total_sales",label:"Total Sales",field:a=>(0,g.formatPrice)(a.cash_sales+a.credit_sales),sortable:!0,align:"left"},{name:"cash",label:"Cash",field:a=>(0,g.formatPrice)(a.cash),sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],b=(0,t.aZ)({name:"UsersIndex ",setup(){(0,d.Z)();const a=(0,m.iH)([]),e=(0,m.iH)(!1),l=(0,m.iH)(!1),o=(0,m.iH)(null),i=(0,m.iH)({}),s=(0,m.iH)(!1);function n(){e.value=!0,(0,c.getLogoutSalesTracking)().then((e=>{a.value=e.data})).catch((a=>{})).finally((()=>{e.value=!1}))}return(0,t.bv)((()=>{n()})),{loadingData:e,tableRows:a,tableColumns:p,logoutDialog:l,logoutForm:o,trackData:i,submitting:s,showLogoutDialog(e){let t={...a.value[e]};i.value={id:t.id,user:t.user_item.id,name:t.user_item.first_name+" "+t.user_item.last_name,date:t.formatted_login.split("at")[0]},l.value=!0},submitUserLogout(){o.value.validate()&&(s.value=!0,(0,c.editLogoutSalesTracking)(i.value.id,{user:i.value.user,cash:i.value.cash}).then((a=>{(0,g.displayNotification)(a.data,"positive"),o.value.resetValidation(),l.value=!1,n()})).catch((a=>{(0,g.displayNotification)(a.response.data,"negative")})).finally((()=>{s.value=!1})))}}}});var f=l(1639),w=l(9885),_=l(7355),h=l(7220),k=l(8879),v=l(2074),y=l(4458),W=l(8326),q=l(1663),D=l(1973),Z=l(3190),C=l(6611),Q=l(1821),U=l(2146),x=l(9984),L=l.n(x);const T=(0,f.Z)(b,[["render",u]]),S=T;L()(b,"components",{QPage:w.Z,QTable:_.Z,QTd:h.Z,QBtn:k.Z,QDialog:v.Z,QCard:y.Z,QForm:W.Z,QToolbar:q.Z,QToolbarTitle:D.Z,QCardSection:Z.Z,QInput:C.Z,QCardActions:Q.Z}),L()(b,"directives",{ClosePopup:U.Z})}}]);