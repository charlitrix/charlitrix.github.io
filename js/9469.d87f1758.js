"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[9469],{9469:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Re});var a=s(9835),i=s(6970);const r={class:"column"},o={key:0,class:"text-h5 text-grey"},d={class:"q-gutter-y-md q-mt-lg"},c=(0,a._)("div",{class:"text-h6"},"Permissions",-1),n={key:0,class:"q-mx-xl row q-gutter-md"},m={class:"col-md-5 column q-gutter-y-md"},l={class:"row items-center"},p={class:"col-md-5 column q-gutter-y-md"},u={class:"row items-center"},y={class:"col-md-5 column q-gutter-y-md"},h={class:"row items-center"},_={class:"col-md-5 column q-gutter-y-md"},v={class:"row items-center"},W={class:"col-md-5 column q-gutter-y-md"},w={class:"row items-center"},k={class:"col-md-5 column q-gutter-y-md"},g={class:"row items-center"},x={class:"col-md-5 column q-gutter-y-md"},b={class:"row items-center"},f={class:"col-md-5 column q-gutter-y-md"},q={class:"row items-center"},D={key:1,class:"q-mx-xl row justify-around q-col-gutter-md"},z={class:"col-md-5"},H={class:"row items-center"},Q={key:0,class:"text-weight-medium text-primary text-h6"},L={key:1},U={class:"col-md-5"},C={class:"row items-center"},T={key:0,class:"text-weight-medium text-primary text-h6"},Z={key:1},A={class:"col-md-5"},I={class:"row items-center"},N={key:0,class:"text-weight-medium text-primary text-h6"},S={key:1},P={class:"col-md-5"},R={class:"row items-center"},V={key:0,class:"text-weight-medium text-primary text-h6"},E={key:1},F={class:"col-md-5"},j={class:"row items-center"},B={key:0,class:"text-weight-medium text-primary text-h6"},O={key:1},K={class:"col-md-5"},$={class:"row items-center"},G={key:0,class:"text-weight-medium text-primary text-h6"},J={key:1},M={class:"col-md-5"},X={class:"row items-center"},Y={key:0,class:"text-weight-medium text-primary text-h6"},ee={key:1},te={class:"col-md-5"},se={class:"row items-center"},ae={key:0,class:"text-weight-medium text-primary text-h6"},ie={key:1},re={class:"col-md-5"},oe={class:"row items-center"},de={key:0,class:"text-weight-medium text-primary text-h6"},ce={key:1},ne={class:"col-md-5"},me={class:"row items-center"},le={key:0,class:"text-weight-medium text-primary text-h6"},pe={key:1},ue={class:"col-md-5"},ye={class:"row items-center"},he={key:0,class:"text-weight-medium text-primary text-h6"},_e={key:1},ve={class:"col-md-5"},We={class:"row items-center"},we={key:0,class:"text-weight-medium text-primary text-h6"},ke={key:1},ge={class:"q-mt-xl"};function xe(e,t,s,xe,be,fe){const qe=(0,a.up)("q-input"),De=(0,a.up)("q-skeleton"),ze=(0,a.up)("q-separator"),He=(0,a.up)("q-tree"),Qe=(0,a.up)("q-btn"),Le=(0,a.up)("q-form"),Ue=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(Ue,{class:"q-ma-xl"},{default:(0,a.w5)((()=>[(0,a.Wm)(Le,{ref:"createAccountTypeForm",onSubmit:e.submitData},{default:(0,a.w5)((()=>[(0,a._)("div",r,[e.Id?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",o,"New Account Type")),(0,a._)("div",d,[(0,a.Wm)(qe,{modelValue:e.accountName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.accountName=t),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),c,e.loadingData?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",m,[(0,a._)("div",l,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",p,[(0,a._)("div",u,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",y,[(0,a._)("div",h,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",_,[(0,a._)("div",v,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",W,[(0,a._)("div",w,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",k,[(0,a._)("div",g,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",x,[(0,a._)("div",b,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})]),(0,a._)("div",f,[(0,a._)("div",q,[(0,a.Wm)(De,{type:"QCheckbox"}),(0,a.Wm)(De,{class:"q-ml-md",width:"20%"})]),(0,a.Wm)(ze,{class:"q-my-sm"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"}),(0,a.Wm)(De,{type:"rect"})])])):((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("div",z,[(0,a.Wm)(He,{nodes:[{label:"Bar",header:"root",children:e.permissionsList.bar_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.bar_permissions,"onUpdate:ticked":t[1]||(t[1]=t=>e.bar_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",H,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",Q,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",L,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",U,[(0,a.Wm)(He,{nodes:[{label:"Restaurant",header:"root",children:e.permissionsList.restaurant_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.restaurant_permissions,"onUpdate:ticked":t[2]||(t[2]=t=>e.restaurant_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",C,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",T,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",Z,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",A,[(0,a.Wm)(He,{nodes:[{label:"Kitchen",header:"root",children:e.permissionsList.kitchen_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.kitchen_permissions,"onUpdate:ticked":t[3]||(t[3]=t=>e.kitchen_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",I,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",N,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",S,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",P,[(0,a.Wm)(He,{nodes:[{label:"Rooms",header:"root",children:e.permissionsList.rooms_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.rooms_permissions,"onUpdate:ticked":t[4]||(t[4]=t=>e.rooms_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",R,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",V,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",E,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",F,[(0,a.Wm)(He,{nodes:[{label:"Other Services",header:"root",children:e.permissionsList.other_services_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.other_services_permissions,"onUpdate:ticked":t[5]||(t[5]=t=>e.other_services_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",j,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",B,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",O,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",K,[(0,a.Wm)(He,{nodes:[{label:"Store",header:"root",children:e.permissionsList.store_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.store_permissions,"onUpdate:ticked":t[6]||(t[6]=t=>e.store_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",$,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",G,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",J,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",M,[(0,a.Wm)(He,{nodes:[{label:"Procurement",header:"root",children:e.permissionsList.procurement_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.procurement_permissions,"onUpdate:ticked":t[7]||(t[7]=t=>e.procurement_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",X,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",Y,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",ee,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",te,[(0,a.Wm)(He,{nodes:[{label:"Expenses",header:"root",children:e.permissionsList.expenses_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.expenses_permissions,"onUpdate:ticked":t[8]||(t[8]=t=>e.expenses_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",se,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",ae,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",ie,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",re,[(0,a.Wm)(He,{nodes:[{label:"Users",header:"root",children:e.permissionsList.users_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.users_permissions,"onUpdate:ticked":t[9]||(t[9]=t=>e.users_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",oe,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",de,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",ce,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",ne,[(0,a.Wm)(He,{nodes:[{label:"Reporting",header:"root",children:e.permissionsList.reporting_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.reporting_permissions,"onUpdate:ticked":t[10]||(t[10]=t=>e.reporting_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",me,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",le,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",pe,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",ue,[(0,a.Wm)(He,{nodes:[{label:"Other Settings",header:"root",children:e.permissionsList.other_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.other_permissions,"onUpdate:ticked":t[11]||(t[11]=t=>e.other_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",ye,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",he,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",_e,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])]),(0,a._)("div",ve,[(0,a.Wm)(He,{nodes:[{label:"Accounting",header:"root",children:e.permissionsList.accounting_permissions}],"node-key":"value","tick-strategy":"leaf",ticked:e.accounting_permissions,"onUpdate:ticked":t[12]||(t[12]=t=>e.accounting_permissions=t),"default-expand-all":""},{"default-header":(0,a.w5)((e=>[(0,a._)("div",We,[e.node.header&&"root"==e.node.header?((0,a.wg)(),(0,a.iD)("div",we,(0,i.zw)(e.node.label),1)):((0,a.wg)(),(0,a.iD)("div",ke,(0,i.zw)(e.node.label),1))])])),_:1},8,["nodes","ticked"])])]))]),(0,a._)("div",ge,[(0,a.Wm)(Qe,{rounded:"",color:"primary",class:"full-width",label:e.Id?"Edit":"Create",type:"submit",loading:e.submittedData},null,8,["label","loading"])])])])),_:1},8,["onSubmit"])])),_:1})}s(9665);var be=s(9302),fe=s(499),qe=s(8339),De=s(4019),ze=s(8221);const He=(0,a.aZ)({name:"AccountTypesCreate",props:["Id"],setup(e){(0,be.Z)();const t=(0,qe.tv)(),s=(0,fe.iH)(!1),i=(0,fe.iH)(null),r=(0,fe.iH)(null),o=(0,fe.iH)([]),d=(0,fe.iH)([]),c=(0,fe.iH)([]),n=(0,fe.iH)([]),m=(0,fe.iH)([]),l=(0,fe.iH)([]),p=(0,fe.iH)([]),u=(0,fe.iH)([]),y=(0,fe.iH)([]),h=(0,fe.iH)([]),_=(0,fe.iH)([]),v=(0,fe.iH)([]);function W(){return s.value=!0,(0,De.getAccountTypes)(`/${e.Id}`).then((e=>{r.value=e.data.name,e.data.permissions.forEach((e=>{"bar"==e.content_type?o.value.push(e.codename):"restaurant"==e.content_type?d.value.push(e.codename):"kitchen"==e.content_type?c.value.push(e.codename):"rooms"==e.content_type?n.value.push(e.codename):"expenses"==e.content_type?m.value.push(e.codename):"otherservices"==e.content_type?l.value.push(e.codename):"store"==e.content_type?p.value.push(e.codename):"procurement"==e.content_type?u.value.push(e.codename):"core"==e.content_type?h.value.push(e.codename):"auth"==e.content_type&&(e.codename.endsWith("user")||e.codename.endsWith("group"))?y.value.push(e.codename):"auth"!=e.content_type||e.codename.endsWith("user")&&e.codename.endsWith("group")?"accounts"==e.content_type&&v.value.push(e.codename):_.value.push(e.codename)}))})).finally((()=>{s.value=!1}))}(0,a.bv)((()=>{e.Id&&W().then((()=>{}))}));const w=(0,fe.iH)(!1);function k(e){return(0,De.createAccountType)({name:r.value,permissions:e})}function g(t){return(0,De.editAccountType)(e.Id,{permissions:t})}return{createAccountTypeForm:i,loadingData:s,permissionsList:ze.permissionsList,accountName:r,bar_permissions:o,restaurant_permissions:d,kitchen_permissions:c,rooms_permissions:n,expenses_permissions:m,other_services_permissions:l,users_permissions:y,other_permissions:h,store_permissions:p,procurement_permissions:u,reporting_permissions:_,accounting_permissions:v,submittedData:w,submitData(){if(i.value.validate()){w.value=!0;let s=[];s=s.concat(o.value.map((e=>({codename:e,content_type:"bar"})))),s=s.concat(d.value.map((e=>({codename:e,content_type:"restaurant"})))),s=s.concat(c.value.map((e=>({codename:e,content_type:"kitchen"})))),s=s.concat(n.value.map((e=>({codename:e,content_type:"rooms"})))),s=s.concat(m.value.map((e=>({codename:e,content_type:"expenses"})))),s=s.concat(l.value.map((e=>({codename:e,content_type:"otherservices"})))),s=s.concat(p.value.map((e=>({codename:e,content_type:"store"})))),s=s.concat(u.value.map((e=>({codename:e,content_type:"procurement"})))),s=s.concat(y.value.map((e=>({codename:e,content_type:"auth"})))),s=s.concat(h.value.map((e=>({codename:e,content_type:"core"})))),s=s.concat(_.value.map((e=>({codename:e,content_type:"auth"})))),s=s.concat(v.value.map((e=>({codename:e,content_type:"accounts"})))),new Promise(((t,a)=>e.Id?t(g(s)):t(k(s)))).then((e=>{(0,ze.displayNotification)(e.data,"positive"),t.push({name:"AccountTypes"}),i.value.resetValidation()})).catch((e=>{(0,ze.displayNotification)(e,"negative",{error:!0})})).finally((()=>{w.value=!1}))}}}}});var Qe=s(1639),Le=s(9885),Ue=s(8326),Ce=s(6611),Te=s(7133),Ze=s(926),Ae=s(4749),Ie=s(8879),Ne=s(9984),Se=s.n(Ne);const Pe=(0,Qe.Z)(He,[["render",xe]]),Re=Pe;Se()(He,"components",{QPage:Le.Z,QForm:Ue.Z,QInput:Ce.Z,QSkeleton:Te.ZP,QSeparator:Ze.Z,QTree:Ae.Z,QBtn:Ie.Z})}}]);