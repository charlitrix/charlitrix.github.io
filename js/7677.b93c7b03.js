"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[7677],{7677:(e,a,l)=>{l.r(a),l.d(a,{default:()=>P});var t=l(9835);const i={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},o={class:"row q-px-xl bg-grey-3 q-py-lg"},d={class:"col-9"},s={class:"row q-gutter-x-lg q-mb-md"},n=(0,t._)("div",{class:"text-h6 q-mb-sm"},"Sale Rates",-1),u={class:"column q-gutter-y-md"},r=(0,t._)("div",{class:"row q-mb-md q-gutter-x-sm text-weight-bold"},[(0,t._)("div",{class:"col"},"Specification"),(0,t._)("div",{class:"col"},"Amount"),(0,t._)("div",{class:"col"})],-1),m={class:"col"},c={class:"col"},p={class:"col-auto row q-gutter-x-sm q-pa-sm"},g={key:0,class:"q-pa-lg text-center text-h6 bg-grey-4 text-grey-8"},v={class:"column q-col-gutter-y-md q-mx-lg q-mb-lg"},f={class:"row justify-end"};function y(e,a,l,y,q,w){const b=(0,t.up)("q-select"),_=(0,t.up)("q-input"),D=(0,t.up)("q-btn"),h=(0,t.up)("q-form"),R=(0,t.up)("q-card-section"),S=(0,t.up)("q-card"),k=(0,t.up)("q-spinner-ios"),W=(0,t.up)("q-inner-loading"),V=(0,t.up)("q-page"),x=(0,t.up)("q-toolbar-title"),C=(0,t.up)("q-toolbar"),Z=(0,t.up)("q-separator"),Q=(0,t.up)("q-item-section"),U=(0,t.up)("q-item"),H=(0,t.up)("q-list"),z=(0,t.up)("q-dialog"),I=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(V,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(h,{ref:"updateServiceDataForm",class:"q-mx-lg q-gutter-y-lg q-py-xl",onSubmit:e.submitData},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(b,{"map-options":"","emit-value":"",modelValue:e.formData.category_id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.category_id=a),"option-label":"name","option-value":"id",options:e.categoryOptions,label:"Category","lazy-rules":"ondemand",loading:e.loadingCategories,rules:e.selectInputRequiredRules(e.categoryOptions.map((e=>e.id)))},null,8,["modelValue","options","loading","rules"]),(0,t.Wm)(_,{modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t.Wm)(_,{modelValue:e.formData.description,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.description=a),label:"Description",type:"textarea",rows:5,"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[e.permissionRequired("otherservices","change_service")?((0,t.wg)(),(0,t.j4)(D,{key:0,rounded:"",loading:e.submittingData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])):(0,t.kq)("",!0)])])])),_:1},8,["onSubmit"]),(0,t._)("div",o,[(0,t._)("div",d,[(0,t._)("div",s,[n,e.permissionRequired("otherservices","add_salerates")?((0,t.wg)(),(0,t.j4)(D,{key:0,"no-caps":"",rounded:"",label:"Add Rate",color:"primary",onClick:a[3]||(a[3]=a=>e.addSaleRatesDialog=!e.addSaleRatesDialog)})):(0,t.kq)("",!0)]),(0,t._)("div",u,[(0,t.Wm)(S,{flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(R,null,{default:(0,t.w5)((()=>[r,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.serviceData.sale_rates,(a=>((0,t.wg)(),(0,t.iD)("div",{class:"row q-gutter-x-sm",key:a.id},[(0,t._)("div",m,[(0,t.Wm)(_,{dense:"",outlined:"",modelValue:a.specification,"onUpdate:modelValue":e=>a.specification=e,modelModifiers:{trim:!0},"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",c,[(0,t.Wm)(_,{dense:"",outlined:"",type:"number",modelValue:a.amount,"onUpdate:modelValue":e=>a.amount=e,modelModifiers:{number:!0},"lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",p,[(0,t._)("div",null,[e.permissionRequired("otherservices","change_salerates")?((0,t.wg)(),(0,t.j4)(D,{key:0,outline:"",rounded:"",size:"sm",label:"Update",icon:"edit",color:"primary",onClick:l=>e.showEditDialog(a),loading:e.submittingData},null,8,["onClick","loading"])):(0,t.kq)("",!0)]),(0,t._)("div",null,[e.permissionRequired("otherservices","delete_salerates")?((0,t.wg)(),(0,t.j4)(D,{key:0,round:"",color:"red",icon:"delete",size:"sm",onClick:l=>e.showDeleteDialog(a.id),loading:e.submittingData},null,8,["onClick","loading"])):(0,t.kq)("",!0)])])])))),128)),e.serviceData.sale_rates&&0==e.serviceData.sale_rates.length?((0,t.wg)(),(0,t.iD)("div",g," No Sale Raltes ")):(0,t.kq)("",!0)])),_:1})])),_:1})])])])]),(0,t.Wm)(W,{showing:e.loadingData},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1}),(0,t.Wm)(z,{modelValue:e.addSaleRatesDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.addSaleRatesDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{style:{width:"700px",maxWidth:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{ref:"addSaleRatesDialogForm",onSubmit:e.submitSalesRatesData},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Uk)("New Sale Rates")])),_:1}),(0,t.wy)((0,t.Wm)(D,{flat:"",round:"",size:"md",icon:"close"},null,512),[[I]])])),_:1}),(0,t.Wm)(Z),(0,t._)("div",v,[(0,t._)("div",f,[(0,t.Wm)(D,{color:"primary",label:"Add",onClick:e.addSaleRate},null,8,["onClick"])]),(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Specification")])),_:1}),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Rate")])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.saleRatesData,((a,l)=>((0,t.wg)(),(0,t.j4)(U,{key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{outlined:"",modelValue:a.specification,"onUpdate:modelValue":e=>a.specification=e,modelModifiers:{trim:!0},"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{outlined:"",type:"number",modelValue:a.amount,"onUpdate:modelValue":e=>a.amount=e,modelModifiers:{number:!0},"lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024),(0,t.Wm)(Q,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{round:"",color:"red",icon:"delete",size:"sm",onClick:a=>e.removeSaleRate(l)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,t._)("div",null,[(0,t.Wm)(D,{rounded:"",color:"primary",label:"Create",class:"full-width",onLoading:e.submittingData,type:"submit"},null,8,["onLoading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}l(9665);var q=l(9302),w=l(499),b=l(4019),_=l(8221);const D=(0,t.aZ)({name:"OtherServicesDetails",props:{id:{required:!0}},setup(e){const a=(0,q.Z)(),l=(0,w.iH)({}),i=(0,w.iH)({}),o=(0,w.iH)(!1),d=(0,w.iH)(!1),s=(0,w.iH)(),n=(0,w.iH)([]),u=(0,w.iH)(!1),r=(0,w.iH)(!1),m=(0,w.iH)(),c=(0,w.iH)([]);function p(){o.value=!0,l.value={},(0,b.getOtherServices)(`/${e.id}`).then((e=>{i.value=e.data,l.value={category_id:e.data.category.id,...e.data}})).finally((()=>{o.value=!1}))}function g(){return u.value=!0,(0,b.getOtherServicesCategories)().then((e=>{n.value=e.data})).finally((()=>{u.value=!1}))}return(0,t.bv)((()=>{(0,t.m0)((()=>{p()})),g()})),{periods:["hour","day","week","month"],updateServiceDataForm:s,loadingData:o,formData:l,serviceData:i,submittingData:d,categoryOptions:n,loadingCategories:u,addSaleRatesDialog:r,addSaleRatesDialogForm:m,saleRatesData:c,addSaleRate(){c.value.push({})},removeSaleRate(e){c.value.splice(e,1)},submitData(){s.value.validate()&&(d.value=!0,(0,b.editOtherServices)(e.id,{...l.value}).then((e=>{(0,_.displayNotification)(e.data,"positive"),p(),s.value.resetValidation()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1})))},submitSalesRatesData(){m.value.validate()&&(d.value=!0,(0,b.createOtherServicesSaleRates)(e.id,{items:c.value}).then((e=>{(0,_.displayNotification)(e.data,"positive"),c.value={},r.value=!1,m.value.resetValidation(),p()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1})))},showDeleteDialog(e){a.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{d.value=!0,(0,b.deleteOtherServicesSaleRates)(e).then((e=>{(0,_.displayNotification)(e.data,"positive"),p()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))},showEditDialog(e){a.dialog({title:"Confirm",message:"Please confirm update?",cancel:!0}).onOk((()=>{d.value=!0,(0,b.editOtherServicesSaleRates)(e.id,{amount:e.amount,specification:e.specification}).then((e=>{(0,_.displayNotification)(e.data,"positive"),p()})).catch((e=>{(0,_.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))}}}});var h=l(1639),R=l(9885),S=l(8326),k=l(4581),W=l(6611),V=l(8879),x=l(4458),C=l(3190),Z=l(854),Q=l(8359),U=l(2074),H=l(1663),z=l(1973),I=l(926),O=l(3246),N=l(490),j=l(1233),F=l(2146),T=l(9984),L=l.n(T);const M=(0,h.Z)(D,[["render",y]]),P=M;L()(D,"components",{QPage:R.Z,QForm:S.Z,QSelect:k.Z,QInput:W.Z,QBtn:V.Z,QCard:x.Z,QCardSection:C.Z,QInnerLoading:Z.Z,QSpinnerIos:Q.Z,QDialog:U.Z,QToolbar:H.Z,QToolbarTitle:z.Z,QSeparator:I.Z,QList:O.Z,QItem:N.Z,QItemSection:j.Z}),L()(D,"directives",{ClosePopup:F.Z})}}]);