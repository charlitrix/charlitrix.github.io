"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[9983],{9983:(e,a,l)=>{l.r(a),l.d(a,{default:()=>U});var t=l(9835),i=l(6970);const n={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},d=(0,t._)("div",{class:"text-h5"},"Update Settings",-1),o={class:"row justify-between"},s=(0,t._)("div",{class:"text-h6"},"Fields",-1),u=(0,t._)("div",{class:"q-mb-md"}," The fields added below will added on to existing fields when entering data ",-1),c={key:0},m={class:"row q-gutter-x-md"},r={key:1,class:"bg-grey-3 q-pa-xl"},g=(0,t._)("div",{class:"text-grey-6 text-center text-h3"},"No fields",-1),p=[g];function v(e,a,l,g,v,f){const b=(0,t.up)("q-input"),w=(0,t.up)("q-toggle"),h=(0,t.up)("q-btn"),k=(0,t.up)("q-item-label"),y=(0,t.up)("q-item-section"),_=(0,t.up)("q-item"),D=(0,t.up)("q-separator"),F=(0,t.up)("q-list"),q=(0,t.up)("q-card"),N=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(N,{class:"q-pa-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(q,{flat:""},{default:(0,t.w5)((()=>[(0,t._)("div",n,[d,(0,t.Wm)(b,{readonly:"","emit-value":"","map-options":"","model-value":e.pageData.item,label:"Name"},null,8,["model-value"]),(0,t.Wm)(w,{size:"md","model-value":e.pageData.enabled,"checked-icon":"check","unchecked-icon":"clear",label:e.pageData.enabled?"Enabled":"Disabled",onClick:a[0]||(a[0]=a=>e.updateStatus(!e.pageData.enabled))},null,8,["model-value","label"]),(0,t._)("div",o,[s,(0,t._)("div",null,[(0,t.Wm)(h,{"no-caps":"",label:"Add Field",color:"primary",onClick:e.addField},null,8,["onClick"])])]),u,e.pageData.details.fields.length>0?((0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(F,{separator:""},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{dense:"",class:"bg-grey-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"text-grey-10 text-weight-medium"},{default:(0,t.w5)((()=>[(0,t.Uk)("Field Name")])),_:1})])),_:1}),(0,t.Wm)(y)])),_:1}),(0,t.Wm)(D),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.pageData.details.fields,((a,l)=>((0,t.wg)(),(0,t.j4)(_,{key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(a.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(y,{side:""},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t.Wm)(h,{round:"",flat:"",color:"blue",icon:"edit",onClick:l=>e.renameField(a.name)},null,8,["onClick"]),(0,t.Wm)(h,{round:"",color:"red",icon:"delete",onClick:l=>e.removeField(a.name)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):((0,t.wg)(),(0,t.iD)("div",r,p))])])),_:1})])])),_:1})}var f=l(499),b=l(4019),w=l(1809),h=l(1353),k=l(9302),y=l(8221);const _=(0,t.aZ)({name:"DocumentSettingsDetails",props:["id"],setup(e){const a=(0,h.F)(),l=(0,k.Z)(),{fiscalYear:i}=(0,w.Jk)(a),n=(0,f.iH)(!1),d=(0,f.iH)(!1),o=(0,f.iH)(!1),s=(0,f.iH)({details:{fields:[]}});function u(){n.value=!0,(0,b.getFeatureSettings)(e.id).then((e=>{s.value=e.data})).finally((()=>{n.value=!1}))}return(0,t.bv)((()=>{u()})),(0,t.m0)((()=>{d.value?l.loading.show({message:"Updating Settings ..."}):l.loading.hide()})),{pageData:s,loadingData:n,submittingSettingData:d,updateDialog:o,updateStatus(a){l.dialog({title:"Confirmation",message:"Please confirm",cancel:!0}).onOk((()=>{d.value=!0,(0,b.editFeatureSettings)(e.id,{state:a?"enable":"disable"}).then((e=>{(0,y.displayNotification)(e.data,"positive"),u(),createDialog.value=!1})).catch((e=>{(0,y.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))},addField(){l.dialog({title:"Add Field",prompt:{label:"Name"},cancel:!0}).onOk((a=>{d.value=!0,(0,b.createFeatureSettingsFields)(e.id,{field:a.trim()}).then((e=>{(0,y.displayNotification)(e.data,"positive"),u(),createDialog.value=!1})).catch((e=>{(0,y.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))},removeField(a){l.dialog({title:"Confirmation",message:"Please Confirm delete?",cancel:!0}).onOk((()=>{d.value=!0,(0,b.deleteFeatureSettingsFields)(e.id,"?name="+a).then((e=>{(0,y.displayNotification)(e.data,"positive"),u(),createDialog.value=!1})).catch((e=>{(0,y.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))},renameField(a){l.dialog({title:"Enter New Name",prompt:{model:a,label:"Name"},cancel:!0}).onOk((l=>{d.value=!0,(0,b.editFeatureSettingsFields)(e.id,{old_name:a,new_name:l.trim()}).then((e=>{(0,y.displayNotification)(e.data,"positive"),u(),createDialog.value=!1})).catch((e=>{(0,y.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))}}}});var D=l(1639),F=l(9885),q=l(4458),N=l(6611),W=l(3175),C=l(8879),S=l(3246),Z=l(490),x=l(1233),Q=l(3115),H=l(926),I=l(9984),O=l.n(I);const T=(0,D.Z)(_,[["render",v]]),U=T;O()(_,"components",{QPage:F.Z,QCard:q.Z,QInput:N.Z,QToggle:W.Z,QBtn:C.Z,QList:S.Z,QItem:Z.Z,QItemSection:x.Z,QItemLabel:Q.Z,QSeparator:H.Z})}}]);