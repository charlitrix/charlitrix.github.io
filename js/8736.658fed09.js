"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[8736],{8736:(e,a,l)=>{l.r(a),l.d(a,{default:()=>oe});var t=l(9835);const o={class:"row q-gutter-x-xl"},i={class:"col"},d={class:"col"},u={class:"col"},s={class:"row items-center justify-end"},n={class:"row q-gutter-x-xl"},m={class:"col"},r=(0,t._)("div",{class:"text-subtitle1"},"Number of rooms:",-1),c={class:"col"},p=(0,t._)("div",{class:"text-subtitle1"},"Rooms available:",-1),g={class:"row q-col-gutter-x-xl"},_={class:"col"},v=(0,t._)("div",{class:"text-subtitle1"},"Adults Capacity:",-1),f={class:"col"},y=(0,t._)("div",{class:"text-subtitle1"},"Children Capacity:",-1),b={class:"row q-px-xl bg-grey-3 q-py-lg"},D={class:"col-8"},q={class:"row q-gutter-x-lg q-mb-md"},R=(0,t._)("div",{class:"text-h6 q-mb-sm"},"Sale Rates",-1),w={class:"column q-gutter-y-md"},V=(0,t._)("div",{class:"row q-mb-md q-gutter-x-sm text-weight-bold"},[(0,t._)("div",{class:"col"},"Unit"),(0,t._)("div",{class:"col"},"Amount"),(0,t._)("div",{class:"col"})],-1),h={class:"col"},x={class:"col"},W={class:"col row q-gutter-x-md q-pa-sm"},k={key:0,class:"q-pa-lg text-center text-h6 bg-grey-4 text-grey-8"},S={class:"column q-col-gutter-y-md q-mx-lg q-mb-lg"},U={class:"row no-wrap items-center q-col-gutter-x-md"},Z=(0,t._)("div",null,"Per",-1);function C(e,a,l,C,Q,z){const I=(0,t.up)("q-input"),T=(0,t.up)("q-select"),H=(0,t.up)("q-btn"),N=(0,t.up)("q-time"),M=(0,t.up)("q-popup-proxy"),P=(0,t.up)("q-form"),F=(0,t.up)("q-card-section"),j=(0,t.up)("q-card"),A=(0,t.up)("q-spinner-ios"),O=(0,t.up)("q-inner-loading"),L=(0,t.up)("q-page"),B=(0,t.up)("q-toolbar-title"),E=(0,t.up)("q-toolbar"),Y=(0,t.up)("q-separator"),K=(0,t.up)("q-dialog"),$=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(L,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(P,{ref:"updateRoomDataForm",class:"q-mx-lg q-gutter-y-lg q-py-xl",onSubmit:e.submitData},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t._)("div",i,[(0,t.Wm)(I,{modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.name=a),modelModifiers:{trim:!0},label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"])]),(0,t._)("div",d,[(0,t.Wm)(T,{"map-options":"","emit-value":"",modelValue:e.formData.room_type_id,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.room_type_id=a),options:e.roomTypeOptions,loading:e.loadingRoomTypes,"option-label":"name","option-value":"id",label:"Type","lazy-rules":"ondemand",rules:e.selectInputRequiredRules(e.roomTypeOptions.map((e=>e.id)))},null,8,["modelValue","options","loading","rules"])]),(0,t._)("div",u,[(0,t.Wm)(I,{readonly:"",label:"Check out time",modelValue:e.formData.check_out_time,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.check_out_time=a)},{append:(0,t.w5)((()=>[(0,t.Wm)(H,{flat:"",round:"",size:"md",color:"grey",icon:"access_time"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,null,{default:(0,t.w5)((()=>[(0,t.Wm)(N,{modelValue:e.formData.check_out_time,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.check_out_time=a),mask:"hh:mm A"},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t.wy)((0,t.Wm)(H,{label:"Close",color:"primary",flat:""},null,512),[[$]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,t._)("div",null,[(0,t.Wm)(I,{modelValue:e.formData.description,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.description=a),modelModifiers:{trim:!0},label:"Description",type:"textarea",rows:"5","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"])]),(0,t._)("div",n,[(0,t._)("div",m,[(0,t.Wm)(I,{outlined:"",dense:"",modelValue:e.formData.total_units,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.total_units=a),modelModifiers:{number:!0},type:"number","input-class":"text-center","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},{before:(0,t.w5)((()=>[r])),_:1},8,["modelValue","rules"])]),(0,t._)("div",c,[(0,t.Wm)(I,{dense:"",outlined:"",modelValue:e.formData.available_units,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.available_units=a),modelModifiers:{number:!0},type:"number","input-class":"text-center","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},{before:(0,t.w5)((()=>[p])),_:1},8,["modelValue","rules"])])]),(0,t._)("div",g,[(0,t._)("div",_,[(0,t.Wm)(I,{dense:"",outlined:"",type:"number",modelValue:e.formData.adults_capacity,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.adults_capacity=a),modelModifiers:{number:!0},"input-class":"text-center","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},{before:(0,t.w5)((()=>[v])),_:1},8,["modelValue","rules"])]),(0,t._)("div",f,[(0,t.Wm)(I,{dense:"",outlined:"",type:"number",modelValue:e.formData.children_capacity,"onUpdate:modelValue":a[8]||(a[8]=a=>e.formData.children_capacity=a),modelModifiers:{number:!0},"input-class":"text-center"},{before:(0,t.w5)((()=>[y])),_:1},8,["modelValue"])])]),(0,t._)("div",null,[(0,t._)("div",null,[e.permissionRequired("rooms","change_room")?((0,t.wg)(),(0,t.j4)(H,{key:0,rounded:"",loading:e.submittingData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])):(0,t.kq)("",!0)])])])),_:1},8,["onSubmit"]),(0,t._)("div",b,[(0,t._)("div",D,[(0,t._)("div",q,[R,e.permissionRequired("rooms","add_salerates")?((0,t.wg)(),(0,t.j4)(H,{key:0,"no-caps":"",rounded:"",label:"Add Rate",color:"primary",onClick:a[9]||(a[9]=a=>e.addSaleRatesDialog=!e.addSaleRatesDialog)})):(0,t.kq)("",!0)]),(0,t._)("div",w,[(0,t.Wm)(j,{flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[V,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.roomData.sale_rates,(a=>((0,t.wg)(),(0,t.iD)("div",{class:"row q-gutter-x-sm",key:a.id},[(0,t._)("div",h,[(0,t.Wm)(I,{dense:"",outlined:"",modelValue:a.unit,"onUpdate:modelValue":e=>a.unit=e,modelModifiers:{trim:!0},"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",x,[(0,t.Wm)(I,{dense:"",outlined:"",type:"number",modelValue:a.amount,"onUpdate:modelValue":e=>a.amount=e,modelModifiers:{number:!0},"lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,t._)("div",W,[(0,t._)("div",null,[e.permissionRequired("rooms","change_salerates")?((0,t.wg)(),(0,t.j4)(H,{key:0,outline:"",rounded:"",size:"sm",label:"Update",icon:"edit",color:"primary",onClick:l=>e.showEditDialog(a),loading:e.submittingData},null,8,["onClick","loading"])):(0,t.kq)("",!0)]),(0,t._)("div",null,[e.permissionRequired("rooms","delete_salerates")?((0,t.wg)(),(0,t.j4)(H,{key:0,round:"",color:"red",icon:"delete",size:"sm",onClick:l=>e.showDeleteDialog(a.id),loading:e.submittingData},null,8,["onClick","loading"])):(0,t.kq)("",!0)])])])))),128)),e.roomData.sale_rates&&0==e.roomData.sale_rates.length?((0,t.wg)(),(0,t.iD)("div",k," No Sale Rates ")):(0,t.kq)("",!0)])),_:1})])),_:1})])])])]),(0,t.Wm)(O,{showing:e.loadingData},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1}),(0,t.Wm)(K,{modelValue:e.addSaleRatesDialog,"onUpdate:modelValue":a[12]||(a[12]=a=>e.addSaleRatesDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{style:{width:"700px",maxWidth:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{ref:"addSaleRatesDialogForm",onSubmit:e.submitSalesRatesData},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(B,null,{default:(0,t.w5)((()=>[(0,t.Uk)("New Sale Rate")])),_:1}),(0,t.wy)((0,t.Wm)(H,{flat:"",round:"",size:"md",icon:"close"},null,512),[[$]])])),_:1}),(0,t.Wm)(Y),(0,t._)("div",S,[(0,t._)("div",U,[(0,t.Wm)(I,{label:"Amount",modelValue:e.saleRatesData.amount,"onUpdate:modelValue":a[10]||(a[10]=a=>e.saleRatesData.amount=a),modelModifiers:{number:!0},type:"number","lazy-rules":"ondemand",rules:e.numberInputRequiredRules()},null,8,["modelValue","rules"]),Z,(0,t.Wm)(I,{label:"Unit",hint:"For example night",modelValue:e.saleRatesData.unit,"onUpdate:modelValue":a[11]||(a[11]=a=>e.saleRatesData.unit=a),modelModifiers:{trim:!0},"lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"])]),(0,t._)("div",null,[(0,t.Wm)(H,{rounded:"",color:"primary",label:"Create",class:"full-width",onLoading:e.submittingData,type:"submit"},null,8,["onLoading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var Q=l(9302),z=l(499),I=l(4019),T=l(8221);const H=(0,t.aZ)({name:"BedRoomDetails",props:{id:{required:!0}},setup(e){const a=(0,Q.Z)(),l=(0,z.iH)({}),o=(0,z.iH)({}),i=(0,z.iH)(!1),d=(0,z.iH)(!1),u=(0,z.iH)(),s=(0,z.iH)([]),n=(0,z.iH)(!1),m=(0,z.iH)(!1),r=(0,z.iH)(),c=(0,z.iH)({});function p(){i.value=!0,l.value={},(0,I.getRooms)(`/${e.id}`).then((e=>{o.value=e.data,l.value={...e.data,room_type_id:e.data.room_type.id}})).finally((()=>{i.value=!1}))}function g(){return n.value=!0,(0,I.getRoomTypes)().then((e=>{s.value=e.data})).finally((()=>{n.value=!1}))}return(0,t.bv)((()=>{(0,t.m0)((()=>{p()})),g()})),{updateRoomDataForm:u,loadingData:i,formData:l,roomData:o,submittingData:d,roomTypeOptions:s,loadingRoomTypes:n,addSaleRatesDialog:m,addSaleRatesDialogForm:r,saleRatesData:c,submitData(){u.value.validate()&&(d.value=!0,(0,I.editRooms)(e.id,{...l.value}).then((e=>{(0,T.displayNotification)(e.data,"positive"),p(),u.value.resetValidation()})).catch((e=>{(0,T.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1})))},submitSalesRatesData(){r.value.validate()&&(d.value=!0,(0,I.createRoomSaleRates)(e.id,{...c.value}).then((e=>{(0,T.displayNotification)(e.data,"positive"),c.value={},m.value=!1,r.value.resetValidation(),p()})).catch((e=>{(0,T.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1})))},showDeleteDialog(e){a.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{d.value=!0,(0,I.deleteRoomSaleRate)(e).then((e=>{(0,T.displayNotification)(e.data,"positive"),p()})).catch((e=>{(0,T.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))},showEditDialog(e){a.dialog({title:"Confirm",message:"Please confirm update?",cancel:!0}).onOk((()=>{d.value=!0,(0,I.editRoomSaleRate)(e.id,{amount:e.amount,unit:e.unit}).then((e=>{(0,T.displayNotification)(e.data,"positive"),p()})).catch((e=>{(0,T.displayNotification)(e.response.data,"negative")})).finally((()=>{d.value=!1}))}))}}}});var N=l(1639),M=l(9885),P=l(8326),F=l(6611),j=l(4581),A=l(8879),O=l(2765),L=l(6770),B=l(4458),E=l(3190),Y=l(854),K=l(8359),$=l(2074),G=l(1663),J=l(1973),X=l(926),ee=l(2146),ae=l(9984),le=l.n(ae);const te=(0,N.Z)(H,[["render",C]]),oe=te;le()(H,"components",{QPage:M.Z,QForm:P.Z,QInput:F.Z,QSelect:j.Z,QBtn:A.Z,QPopupProxy:O.Z,QTime:L.Z,QCard:B.Z,QCardSection:E.Z,QInnerLoading:Y.Z,QSpinnerIos:K.Z,QDialog:$.Z,QToolbar:G.Z,QToolbarTitle:J.Z,QSeparator:X.Z}),le()(H,"directives",{ClosePopup:ee.Z})}}]);