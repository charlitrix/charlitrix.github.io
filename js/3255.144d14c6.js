"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[3255],{1648:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_});var o=a(9835),t=a(6970);const i={class:"row justify-end"},n={class:"row no-wrap q-gutter-x-md"};function u(e,l,a,u,s,d){const r=(0,o.up)("q-btn"),c=(0,o.up)("q-td"),m=(0,o.up)("q-table"),p=(0,o.up)("q-page"),g=(0,o.up)("q-toolbar-title"),f=(0,o.up)("q-toolbar"),b=(0,o.up)("q-input"),v=(0,o.up)("q-card-section"),w=(0,o.up)("q-form"),q=(0,o.up)("q-card"),y=(0,o.up)("q-dialog"),Q=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(p,{class:"q-ma-xl"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(r,{"no-caps":"",label:"Add Question",color:"primary",onClick:l[0]||(l[0]=l=>e.questionFormDialog=!e.questionFormDialog)})]),(0,o.Wm)(m,{flat:"","hide-pagination":"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Questions","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No questions available","loading-label":"Loading data..."},{"body-cell-id":(0,o.w5)((e=>[(0,o.Wm)(c,{props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.rowIndex+1),1)])),_:2},1032,["props"])])),"body-cell-action":(0,o.w5)((l=>[(0,o.Wm)(c,{props:l},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(r,{round:"",unelevated:"",size:"sm",icon:"edit",color:"primary",loading:e.submitting,onClick:a=>e.showEditDialog(l.rowIndex)},null,8,["loading","onClick"]),(0,o.Wm)(r,{round:"",unelevated:"",size:"sm",icon:"delete",color:"red",loading:e.submitting,onClick:a=>e.showDeleteDialog(l.row.id)},null,8,["loading","onClick"])])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,o.Wm)(y,{modelValue:e.questionFormDialog,"onUpdate:modelValue":l[2]||(l[2]=l=>e.questionFormDialog=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{style:{width:"500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{ref:"questionForm",onSubmit:e.submitData},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{textContent:(0,t.zw)(e.formData.id?"Update Question":"New Question")},null,8,["textContent"]),(0,o.wy)((0,o.Wm)(r,{flat:"",round:"",icon:"close",onClick:e.clearForm},null,8,["onClick"]),[[Q]])])),_:1}),(0,o.Wm)(v,{class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{type:"textarea",rows:"2",modelValue:e.formData.question,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formData.question=l),modelModifiers:{trim:!0},label:"Question","lazy-rules":"ondemand",rules:e.textInputRequiredRules(),suffix:"?"},null,8,["modelValue","rules"]),(0,o._)("div",null,[(0,o.Wm)(r,{rounded:"",color:"primary",type:"submit",class:"full-width",label:e.formData.id?"Update":"Submit",loading:e.submitting},null,8,["label","loading"])])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var s=a(9302),d=a(499),r=a(8221),c=a(4019);const m=(0,o.aZ)({name:"RecoveryQuestionsIndex",setup(){const e=(0,s.Z)(),l=(0,d.iH)(!1),a=(0,d.iH)([]),t=(0,d.iH)(null),i=(0,d.iH)(!1),n=(0,d.iH)({}),u=(0,d.iH)(!1);function m(){a.value=[],l.value=!0,(0,c.getAccountRecoveryQuestions)().then((e=>{a.value=e.data})).finally((()=>{l.value=!1}))}function p(){if(n.value.id){let e={...n.value},l=e.id;return delete e.id,(0,c.updateAccountRecoveryQuestions)(l,e)}return(0,c.createAccountRecoveryQuestions)(n.value)}function g(){n.value={}}return(0,o.bv)((()=>{m()})),{tableRows:a,loadingData:l,questionForm:t,questionFormDialog:i,formData:n,submitting:u,tableColumns:[{name:"id",label:"#",align:"left"},{name:"question",label:"Question",field:e=>e.question+" ?",align:"left"},{name:"action",label:"Action",align:"left"}],clearForm:g,showEditDialog(e){let l={...a.value[e]};n.value=l,i.value=!0},submitData(){e.dialog({title:"Confirm",message:"Please confirm",cancel:!0}).onOk((()=>{t.value.validate().then((e=>{e&&(u.value=!0,n.value.question=n.value.question.replace("?",""),p().then((e=>{(0,r.displayNotification)(e.data,"positive"),g(),m(),i.value=!1})).catch((e=>{(0,r.displayNotification)(e.response.data,"negative")})).finally((()=>{u.value=!1})))}))}))},showDeleteDialog(l){e.dialog({title:"Confirm",message:"Please confirm",cancel:!0}).onOk((()=>{u.value=!0,(0,c.deleteAccountRecoveryQuestions)(l).then((e=>{(0,r.displayNotification)(e.data,"positive"),m()})).catch((e=>{(0,r.displayNotification)(e.response.data,"negative")})).finally((()=>{u.value=!1}))}))}}}});var p=a(1639),g=a(9885),f=a(8879),b=a(7355),v=a(7220),w=a(2074),q=a(4458),y=a(8326),Q=a(1663),D=a(1973),h=a(3190),C=a(6611),W=a(2146),k=a(9984),Z=a.n(k);const x=(0,p.Z)(m,[["render",u]]),_=x;Z()(m,"components",{QPage:g.Z,QBtn:f.Z,QTable:b.Z,QTd:v.Z,QDialog:w.Z,QCard:q.Z,QForm:y.Z,QToolbar:Q.Z,QToolbarTitle:D.Z,QCardSection:h.Z,QInput:C.Z}),Z()(m,"directives",{ClosePopup:W.Z})}}]);