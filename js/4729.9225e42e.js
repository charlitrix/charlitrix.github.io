"use strict";(globalThis["webpackChunkaies"]=globalThis["webpackChunkaies"]||[]).push([[4729],{4729:(e,a,l)=>{l.r(a),l.d(a,{default:()=>U});var t=l(9835),o=l(6970);const i={class:"row justify-end"},n={class:"row q-col-gutter-md"},u={class:"column justify-center"},r=(0,t._)("div",null,null,-1),s={class:"row no-wrap q-gutter-x-md"},d={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"},m={class:"column q-col-gutter-y-lg q-mx-lg q-mb-lg"};function c(e,a,l,c,g,p){const v=(0,t.up)("q-btn"),y=(0,t.up)("q-td"),b=(0,t.up)("q-table"),w=(0,t.up)("q-page"),f=(0,t.up)("q-toolbar-title"),D=(0,t.up)("q-toolbar"),q=(0,t.up)("q-separator"),C=(0,t.up)("q-input"),_=(0,t.up)("q-form"),h=(0,t.up)("q-card"),k=(0,t.up)("q-dialog"),W=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(w,{class:"q-ma-xl"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[e.permissionRequired("restaurant","add_category")?((0,t.wg)(),(0,t.j4)(v,{key:0,rounded:"",color:"primary",label:"Create",onClick:a[0]||(a[0]=a=>e.createDialog=!e.createDialog)})):(0,t.kq)("",!0)]),(0,t.Wm)(b,{flat:"",loading:e.loadingData,columns:e.tableColumns,rows:e.tableRows,pagination:{rowsPerPage:0},title:"Categories","row-key":"id","table-header-class":"bg-primary text-white","no-data-label":"No categories available","loading-label":"Loading categories..."},{"body-cell-units_available":(0,t.w5)((e=>[(0,t.Wm)(y,{props:e},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",u,[(0,t._)("div",null,(0,o.zw)(e.value),1)]),r])])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((a=>[(0,t.Wm)(y,{props:a},{default:(0,t.w5)((()=>[(0,t._)("div",s,[e.permissionRequired("restaurant","change_category")?((0,t.wg)(),(0,t.j4)(v,{key:0,round:"",unelevated:"",size:"sm",icon:"edit",color:"primary",onClick:l=>e.editStock(a.rowIndex)},null,8,["onClick"])):(0,t.kq)("",!0),e.permissionRequired("restaurant","delete_category")?((0,t.wg)(),(0,t.j4)(v,{key:1,round:"",unelevated:"",size:"sm",icon:"delete",color:"red",onClick:l=>e.showDeleteDialog(a.row.id),loading:e.submittingData},null,8,["onClick","loading"])):(0,t.kq)("",!0)])])),_:2},1032,["props"])])),_:1},8,["loading","columns","rows"])])),_:1}),(0,t.Wm)(k,{modelValue:e.createDialog,"onUpdate:modelValue":a[2]||(a[2]=a=>e.createDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{ref:"createDialogForm",onSubmit:e.submitCategoryData},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Create New Category")])),_:1}),(0,t.wy)((0,t.Wm)(v,{flat:"",round:"",size:"md",icon:"close"},null,512),[[W]])])),_:1}),(0,t.Wm)(q),(0,t._)("div",d,[(0,t.Wm)(C,{modelValue:e.categoryData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.categoryData.name=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(v,{rounded:"",loading:e.submittedCategoryData,color:"primary",label:"Create",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(k,{modelValue:e.updateDialog,"onUpdate:modelValue":a[4]||(a[4]=a=>e.updateDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{style:{width:"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{ref:"updateDialogForm",onSubmit:e.updateStockData},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Update Category")])),_:1}),(0,t.wy)((0,t.Wm)(v,{flat:"",round:"",size:"md",icon:"close"},null,512),[[W]])])),_:1}),(0,t.Wm)(q),(0,t._)("div",m,[(0,t.Wm)(C,{modelValue:e.selectedItem.newName,"onUpdate:modelValue":a[3]||(a[3]=a=>e.selectedItem.newName=a),label:"Name","lazy-rules":"ondemand",rules:e.textInputRequiredRules()},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(v,{rounded:"",loading:e.submittedCategoryData,color:"primary",label:"Update",class:"full-width",type:"submit"},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])],64)}var g=l(9302),p=l(499),v=l(4019),y=l(8221);const b=[{name:"id",label:"#",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"actions",label:"Actions",align:"left"}],w=(0,t.aZ)({name:"RestaurantCategories",setup(){const e=(0,g.Z)(),a=(0,p.iH)([]),l=(0,p.iH)(!1),o=(0,p.iH)(!1),i=(0,p.iH)(null),n=(0,p.iH)(!1),u=(0,p.iH)({}),r=(0,p.iH)(!1),s=(0,p.iH)(null),d=(0,p.iH)({}),m=(0,p.iH)(!1);function c(){l.value=!0,(0,v.getRestaurantCategories)().then((e=>{a.value=e.data})).catch((e=>{})).finally((()=>{l.value=!1}))}return(0,t.bv)((()=>{c()})),{loadingData:l,tableRows:a,tableColumns:b,categoryData:u,createDialog:o,createDialogForm:i,submittedCategoryData:n,updateDialog:r,updateDialogForm:s,selectedItem:d,submittingData:m,editStock(e){d.value=a.value[e],d.value.newName=d.value.name,r.value=!0},updateStockData(){s.value.validate()&&(n.value=!0,(0,v.updateRestaurantCategories)(d.value.id,{name:d.value.newName}).then((a=>{e.notify({type:"positive",message:a.data}),d.value={},c(),r.value=!1,s.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1})))},submitCategoryData(){i.value.validate()&&(n.value=!0,(0,v.createRestaurantCategories)({...u.value}).then((a=>{e.notify({type:"positive",message:a.data}),u.value={},c(),o.value=!1,i.value.resetValidation()})).catch((a=>{e.notify({type:"negative",message:a.response.data.length<1e3?a.response.data:"Server error please contact system administrator"})})).finally((()=>{n.value=!1})))},showDeleteDialog(a){e.dialog({title:"Confirm",message:"Please confirm delete?",cancel:!0}).onOk((()=>{m.value=!0,(0,v.deleteRestaurantCategories)(a).then((e=>{(0,y.displayNotification)(e.data,"positive"),c()})).catch((e=>{(0,y.displayNotification)(e.response.data,"negative")})).finally((()=>{m.value=!1}))}))}}}});var f=l(1639),D=l(9885),q=l(8879),C=l(7355),_=l(7220),h=l(2074),k=l(4458),W=l(8326),Z=l(1663),R=l(1973),V=l(926),x=l(6611),Q=l(2146),H=l(9984),N=l.n(H);const S=(0,f.Z)(w,[["render",c]]),U=S;N()(w,"components",{QPage:D.Z,QBtn:q.Z,QTable:C.Z,QTd:_.Z,QDialog:h.Z,QCard:k.Z,QForm:W.Z,QToolbar:Z.Z,QToolbarTitle:R.Z,QSeparator:V.Z,QInput:x.Z}),N()(w,"directives",{ClosePopup:Q.Z})}}]);